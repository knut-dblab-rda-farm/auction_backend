"use strict";(self["webpackChunkrealvue"]=self["webpackChunkrealvue"]||[]).push([[280],{5140:function(t,e,a){a.d(e,{Z:function(){return _}});var i=a(3396),s=a(7139),r=a(3289);const n=t=>((0,i.dD)("data-v-356d296a"),t=t(),(0,i.Cn)(),t),c={class:"header"},o={class:"navLi"},l=(0,i.Uk)("mdi-home"),d={class:"navLi"},u={class:"navLi"},h=n((()=>(0,i._)("i",{class:"fas fa-chevron-left fa-2x","aria-hidden":"true"},null,-1))),g=[h];function m(t,e,a,n,h,m){const p=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("header",c,[(0,i._)("nav",null,[(0,i._)("li",o,[(0,i.Wm)(p,{to:"/"},{default:(0,i.w5)((()=>[(0,i.Wm)(r.t,null,{default:(0,i.w5)((()=>[l])),_:1})])),_:1})]),(0,i._)("li",d,(0,s.zw)(a.headerProps),1),(0,i._)("li",u,[(0,i._)("p",{class:"nav__link",onClick:e[0]||(e[0]=t=>m.goBack())},g)])])])}var p={props:{headerProps:String},methods:{goBack(){this.$router.go(-1)}}},v=a(89);const f=(0,v.Z)(p,[["render",m],["__scopeId","data-v-356d296a"]]);var _=f},4280:function(t,e,a){a.r(e),a.d(e,{default:function(){return C}});var i=a(3396),s=a(7139);const r=t=>((0,i.dD)("data-v-4f7c80c8"),t=t(),(0,i.Cn)(),t),n={class:"contain"},c={class:"reviewInformation"},o=["src"],l={class:"information"},d=r((()=>(0,i._)("hr",{class:"line"},null,-1))),u={class:"star-select"},h=r((()=>(0,i._)("h2",null,"별점 선택",-1))),g={class:"starState"},m=(0,i.uE)('<hr class="line" data-v-4f7c80c8><div class="review-comment" data-v-4f7c80c8><h2 data-v-4f7c80c8>내용</h2><textarea placeholder="상품에 대한 평가를 20자 이상 작성해주세요!" name="" id="product-contents" cols="35" rows="5" data-v-4f7c80c8></textarea></div><hr class="line" data-v-4f7c80c8><h2 class="title" data-v-4f7c80c8>사진 등록</h2>',4),p={class:"file-img-container"},v=r((()=>(0,i._)("label",{for:"input-file",class:"select-img"},"+",-1))),f=r((()=>(0,i._)("div",{id:"image_container",class:"image_container"},null,-1))),_={class:"final-buttons"};function w(t,e,a,r,w,D){const S=(0,i.up)("BackHeader");return(0,i.wg)(),(0,i.iD)("div",n,[(0,i.Wm)(S,{headerProps:w.headerProps},null,8,["headerProps"]),(0,i._)("div",c,[(0,i._)("img",{class:"review-image",src:`/product_images/${w.getData.product_img_name}.png`,alt:"리뷰할 사진"},null,8,o),(0,i._)("div",l,[(0,i._)("p",null,(0,s.zw)(w.getData.auction_name),1)])]),d,(0,i._)("div",u,[h,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(w.reqData.starState,(t=>((0,i.wg)(),(0,i.iD)("i",{key:t,class:"fa fa-star review-star"})))),128)),(0,i._)("div",g,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(w.starState,(t=>((0,i.wg)(),(0,i.iD)("button",{onClick:e[0]||(e[0]=(...t)=>D.reviewBtnActivate&&D.reviewBtnActivate(...t)),class:"star-choice-button",key:t},(0,s.zw)(t),1)))),128))])]),m,(0,i._)("div",p,[v,(0,i._)("input",{onChange:e[1]||(e[1]=t=>D.imgPreview(t)),id:"input-file",class:"select-img-hidden",type:"file"},null,32),f]),(0,i._)("div",_,[(0,i._)("button",{class:"final-button",onClick:e[2]||(e[2]=e=>t.$router.go(-1))},"취소"),(0,i._)("button",{class:"final-button",onClick:e[3]||(e[3]=t=>D.reqDatas())},(0,s.zw)(0===w.editState?"등록":"수정"),1)])])}a(6699);var D=a(6265),S=a.n(D),k=a(5140),b={components:{BackHeader:k.Z},data(){return{headerProps:"리뷰 작성",starState:["안좋아요","그냥 그래요","보통이에요","괜찮아요","정말좋아요"],getTest:{img:"",name:"못난이 복숭아",price:1e4},getData:{},reqData:{starState:5,comment:"",selectPicture:""},imgData:[],user:JSON.parse(localStorage.getItem("user")),editState:0,editData:{}}},mounted(){this.$route.fullPath.includes("edit")?(this.editState=1,this.editData=this.$store.state.review.getReviewData,document.getElementById("product-contents").value=this.editData.consumer_review,this.reqData.starState=this.editData.grade_point,document.querySelectorAll(".star-choice-button")[this.editData.grade_point-1].classList.add("active")):document.querySelectorAll(".star-choice-button")[4].classList.add("active"),this.getData=this.$store.state.review.getReviewData;let t=document.querySelectorAll(".star-choice-button");t.forEach(((t,e)=>{t.addEventListener("click",(()=>{this.reqData.starState=e+1}))}))},methods:{reviewBtnActivate({target:t}){this.reviewState=t.innerHTML;let e=document.querySelector(".starState");[...e.children].forEach((e=>{e.classList.toggle("active",e===t)}))},imgPreview(t){var e=new FileReader;e.onload=function(t){var e=document.createElement("img");e.setAttribute("src",t.target.result),e.setAttribute("width","60px"),e.setAttribute("height","60px"),document.getElementById("image_container").appendChild(e)},e.readAsDataURL(t.target.files[0]),this.imgData.push(t.target.files[0]),console.log(t.target.files[0])},reqDatas(){console.log(this.getData.farm_id);let t=new FormData;t.append("checkUser",localStorage.getItem("checkUser")),t.append("auction_Id",this.getData.auction_Id),t.append("farm_id",this.getData.farm_id),t.append("consumer_id",JSON.parse(localStorage.getItem("user")).consumer_id),t.append("grade_point",this.reqData.starState),t.append("consumer_review",document.getElementById("product-contents").value),t.append("auction_name",this.getData.auction_name),this.imgData.length>0&&t.append("review_img_file",this.imgData[0]);for(let e of t)console.log(e);if(this.$route.fullPath.includes("edit")){console.log(this.getData);for(let e of t)console.log(e);S().patch("/api/AuctionReview",t,{headers:{TOKEN:this.user.token,"Content-Type":"multipart/form-data"}}).then((t=>{alert("수정이 완료되었습니다."),this.$router.push("/consumer_mypage")})).catch((t=>{console.log(t)}))}else S().post("/api/AuctionReview",t,{headers:{TOKEN:this.user.token,"Content-Type":"multipart/form-data"}}).then((t=>{this.$router.push("/consumer_mypage")})).catch((t=>{console.log(t)}))}}},y=a(89);const A=(0,y.Z)(b,[["render",w],["__scopeId","data-v-4f7c80c8"]]);var C=A}}]);
//# sourceMappingURL=280.a4f28729.js.map