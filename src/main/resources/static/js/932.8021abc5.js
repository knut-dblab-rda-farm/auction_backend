"use strict";(self["webpackChunkrealvue"]=self["webpackChunkrealvue"]||[]).push([[932,624],{8035:function(t,e,a){a.d(e,{Z:function(){return b}});var l=a(3396),i=a(7139);const n=t=>((0,l.dD)("data-v-3e57e5ff"),t=t(),(0,l.Cn)(),t),s={class:"main_nav_t_div"},r={class:"main_t_nav"},p={class:"main_t_nav_list"},_=n((()=>(0,l._)("li",{class:"nav__btn"},[(0,l._)("a",{class:"nav__link",href:"alert"},[(0,l._)("i",{class:"fas fa-bell fa-2x","aria-hidden":"true"})])],-1))),d={class:"main_m_li_list"},u={class:"nav_m_link",href:"workout.html"},o={class:"nav__btn"},c=n((()=>(0,l._)("i",{class:"fas fa-chevron-left fa-2x","aria-hidden":"true"},null,-1))),h=[c];function m(t,e,a,n,c,m){return(0,l.wg)(),(0,l.iD)("div",s,[(0,l._)("nav",r,[(0,l._)("ul",p,[_,(0,l._)("li",d,[(0,l._)("p",u,(0,i.zw)(a.headerProps),1)]),(0,l._)("li",o,[(0,l._)("a",{class:"nav__link",onClick:e[0]||(e[0]=e=>t.$router.go(-1))},h)])])])])}var f={props:{headerProps:String}},y=a(89);const g=(0,y.Z)(f,[["render",m],["__scopeId","data-v-3e57e5ff"]]);var b=g},2368:function(t,e,a){a.r(e),a.d(e,{default:function(){return X}});var l=a(3396),i=a(9242),n=a(7139);const s=(0,l._)("br",null,null,-1),r=(0,l._)("img",{src:"image"},null,-1),p={class:"table-100"},_=(0,l._)("td",{class:"table-100-tyfk"},"경매명",-1),d={class:"table-100-0pky",colspan:"3"},u=(0,l._)("td",{class:"table-100-tyfk"},"작물",-1),o={class:"table-100-0pky",colspan:"3"},c=(0,l._)("td",{class:"table-100-tyfk"},"중량",-1),h={class:"table-100-0pky",colspan:"3"},m=(0,l._)("td",{class:"table-100-tyfk"},"시작 가격",-1),f={class:"table-100-0pky",colspan:"3"},y=(0,l._)("td",{class:"table-100-tyfk"},"최대 가격",-1),g={class:"table-100-0pky",colspan:"3"},b=(0,l._)("td",{class:"table-100-tyfk"},"낙과 일자",-1),k={class:"table-100-1pky",colspan:"3"},x=(0,l._)("td",{class:"table-100-tyfk"},"마감일",-1),v={class:"table-100-1pky",colspan:"3"},w=(0,l._)("td",{class:"table-100-tyfk"},"크기",-1),T={class:"table-100-1pky"},z=(0,l.Uk)(" 소"),D={class:"table-100-1pky"},U=(0,l.Uk)(" 중"),E={class:"table-100-1pky"},N=(0,l.Uk)(" 대"),V=(0,l._)("td",{class:"table-100-tyfk"},"상태",-1),O={class:"table-100-1pky"},I=(0,l.Uk)(" 상 "),S={class:"table-100-1pky"},P=(0,l.Uk)(" 중 "),C={class:"table-100-1pky"},$=(0,l.Uk)(" 하 "),q=(0,l._)("td",{class:"table-100-tyfk"},"설명",-1),G={class:"table-100-0pky",colspan:"3"},A={class:"main_nav_b_div"},Z={class:"main_b_nav"},F={class:"main_m_ui_list"},K={class:"nav__btn"},H={class:"nav__link",href:"#"};function J(t,e,a,J,M,R){const B=(0,l.up)("Header");return(0,l.wg)(),(0,l.iD)("div",null,[(0,l.Wm)(B,{headerProps:M.headerProps},null,8,["headerProps"]),(0,l._)("div",null,[(0,l._)("input",{multiple:"multiple",onChange:e[0]||(e[0]=t=>R.upload()),type:"file",id:"product_img_files",name:"product_img_files",accept:"image/*"},null,32),s,r]),(0,l._)("fieldset",null,[(0,l._)("table",p,[(0,l._)("tbody",null,[(0,l._)("tr",null,[_,(0,l._)("td",d,[(0,l.wy)((0,l._)("input",{id:"td_input_text",type:"text",name:"text",size:"20",style:{width:"100%"},required:"",placeholder:"경매명을 입력해주세요","onUpdate:modelValue":e[1]||(e[1]=t=>M.p_name=t)},null,512),[[i.nr,M.p_name]])])]),(0,l._)("tr",null,[u,(0,l._)("td",o,[(0,l.wy)((0,l._)("input",{id:"td_input_text",type:"text",name:"text",size:"20",style:{width:"100%"},required:"",placeholder:"작물을 입력해주세요","onUpdate:modelValue":e[2]||(e[2]=t=>M.product=t)},null,512),[[i.nr,M.product]])])]),(0,l._)("tr",null,[c,(0,l._)("td",h,[(0,l.wy)((0,l._)("input",{id:"td_input_text",type:"text",name:"text",size:"20",style:{width:"100%"},required:"",placeholder:"kg   (숫자만 입력 가능합니다.)","onUpdate:modelValue":e[3]||(e[3]=t=>M.product_kg=t)},null,512),[[i.nr,M.product_kg]])])]),(0,l._)("tr",null,[m,(0,l._)("td",f,[(0,l.wy)((0,l._)("input",{id:"td_input_text",type:"text",name:"text",size:"20",style:{width:"100%"},required:"",placeholder:"원   (숫자만 입력 가능합니다.)","onUpdate:modelValue":e[4]||(e[4]=t=>M.p_starting_price=t)},null,512),[[i.nr,M.p_starting_price]])])]),(0,l._)("tr",null,[y,(0,l._)("td",g,[(0,l.wy)((0,l._)("input",{id:"td_input_text",type:"text",name:"text",size:"20",style:{width:"100%"},required:"",placeholder:"원   (숫자만 입력 가능합니다.)","onUpdate:modelValue":e[5]||(e[5]=t=>M.p_max_price=t)},null,512),[[i.nr,M.p_max_price]])])]),(0,l._)("tr",null,[b,(0,l._)("td",k,[(0,l.wy)((0,l._)("input",{type:"datetime-local","onUpdate:modelValue":e[6]||(e[6]=t=>M.p_drop_date=t)},null,512),[[i.nr,M.p_drop_date]])])]),(0,l._)("tr",null,[x,(0,l._)("td",v,[(0,l.wy)((0,l._)("input",{type:"datetime-local","onUpdate:modelValue":e[7]||(e[7]=t=>M.deadline_date=t)},null,512),[[i.nr,M.deadline_date]])])]),(0,l._)("tr",null,[w,(0,l._)("td",T,[(0,l.wy)((0,l._)("input",{type:"radio",name:"size","onUpdate:modelValue":e[8]||(e[8]=t=>M.size=t),value:"소"},null,512),[[i.G2,M.size]]),z]),(0,l._)("td",D,[(0,l.wy)((0,l._)("input",{type:"radio",name:"size","onUpdate:modelValue":e[9]||(e[9]=t=>M.size=t),value:"중"},null,512),[[i.G2,M.size]]),U]),(0,l._)("td",E,[(0,l.wy)((0,l._)("input",{type:"radio",name:"size","onUpdate:modelValue":e[10]||(e[10]=t=>M.size=t),value:"대"},null,512),[[i.G2,M.size]]),N])]),(0,l._)("tr",null,[V,(0,l._)("td",O,[(0,l.wy)((0,l._)("input",{type:"radio",name:"status","onUpdate:modelValue":e[11]||(e[11]=t=>M.p_status=t),value:"상"},null,512),[[i.G2,M.p_status]]),I]),(0,l._)("td",S,[(0,l.wy)((0,l._)("input",{type:"radio",name:"status","onUpdate:modelValue":e[12]||(e[12]=t=>M.p_status=t),value:"중"},null,512),[[i.G2,M.p_status]]),P]),(0,l._)("td",C,[(0,l.wy)((0,l._)("input",{type:"radio",name:"status","onUpdate:modelValue":e[13]||(e[13]=t=>M.p_status=t),value:"하"},null,512),[[i.G2,M.p_status]]),$])]),(0,l._)("tr",null,[q,(0,l._)("td",G,[(0,l.wy)((0,l._)("input",{id:"td_input_text",type:"text",name:"text",size:"20",style:{width:"100%"},required:"",placeholder:"작물의 세부사항을 적어주세요","onUpdate:modelValue":e[14]||(e[14]=t=>M.p_explanation=t)},null,512),[[i.nr,M.p_explanation]])])])])])]),(0,l._)("div",A,[(0,l._)("nav",Z,[(0,l._)("ul",F,[(0,l._)("li",K,[(0,l._)("a",H,[(0,l._)("h4",{class:"user-component__title",onClick:e[15]||(e[15]=t=>R.submitAuction())},(0,n.zw)(M.auctionSubmit),1)])])])])])])}var M=a(6265),R=a.n(M),B=a(8035),W=a(1177),j={components:{Header:B.Z,Slide:W["default"]},name:"submitProduct",data(){return{headerProps:"경매 등록",auctionSubmit:"등록하기",p_name:null,product:null,product_kg:null,p_starting_price:null,p_max_price:null,p_drop_date:null,deadline_date:null,size:null,p_status:null,p_explanation:null,product_img_files:[],user:JSON.parse(localStorage.getItem("user")),farm_id:JSON.parse(localStorage.getItem("user")).farm_id,auctionId:0,blankErrorText:"모두 작성해주셔야 합니다!",numberErrorText:"중량, 시작가, 최대가는 숫자만 입력 가능합니다!",auctionPriceErrorText:"시작가는 최대가격 보다 작아야 합니다!",auctionDropDateErrorText:"낙과일자는 현재 시간 이전이어야 합니다!",auctionDeadlineDateErrorText:"경매 마감일자는 최소 현재 시간보다 5분 이후이어야 합니다.!",auctionRegistText:"경매 등록하시겠습까?",FIVE_MINUTE:3e5}},mounted(){null==this.farm_id&&(alert("농가회원이 아닙니다!"),this.$router.go(-1)),"/auction_reg"!==this.$route.path&&(this.headerProps="경매 수정",this.auctionSubmit="수정하기",this.writeState())},methods:{writeState(){let t=this.$route.params.id;R().get(`/api/auctionInfo/${t}`,{headers:{TOKEN:this.user.token}}).then((t=>{console.log(t.data[0]);const e=t.data[0];this.p_name=e.auction_name,this.p_starting_price=e.a_starting_price,this.p_max_price=e.a_max_price,this.deadline_date=e.deadline_date})).catch((t=>console.log(t)))},upload(){this.product_img_files=document.getElementById("product_img_files"),console.log("test",this.product_img_files.files)},submitAuction(){if(null==this.p_name||null==this.product||null==this.product_kg||null==this.p_starting_price||null==this.p_max_price||null==this.p_drop_date||null==this.deadline_date||null==this.size||null==this.p_status||null==this.p_explanation)return alert(this.blankErrorText);if(""==this.p_name||""==this.product||""==this.product_kg||""==this.p_starting_price||""==this.p_max_price||""==this.p_drop_date||""==this.deadline_date||""==this.size||""==this.p_status||""==this.p_explanation)return alert(this.blankErrorText);if(!this.isNumber(this.product_kg)||!this.isNumber(this.p_starting_price)||!this.isNumber(this.p_max_price))return alert(this.numberErrorText);if(Number(this.p_max_price)<Number(this.p_starting_price))return alert(this.auctionPriceErrorText);let t=new Date;if(new Date(this.p_drop_date)>t)return alert(this.auctionDropDateErrorText);if(new Date(this.deadline_date).getTime()<t.getTime()+this.FIVE_MINUTE)return alert(this.auctionDeadlineDateErrorText);if(!confirm(this.auctionRegistText))return;let e=new FormData;console.log("p_drop_date : "+this.p_drop_date),console.log("deadline_date : "+this.deadline_date);for(let a of this.product_img_files.files)e.append("productDTO.product_img_files",a);e.append("auction_name",this.p_name),e.append("productDTO.product",this.product),e.append("productDTO.product_kg",this.product_kg),e.append("productDTO.p_drop_date",this.p_drop_date),e.append("productDTO.size",this.size),e.append("productDTO.p_status",this.p_status),e.append("productDTO.p_explanation",this.p_explanation),e.append("a_starting_price",this.p_starting_price),e.append("bid_price",this.p_starting_price),e.append("a_max_price",this.p_max_price),e.append("deadline_date",this.deadline_date),e.append("farm_id",this.farm_id),this.product_img_files.length<1?alert("이미지 파일이 없습니다."):"/auction_reg"!==this.$route.path?R().patch("/api/updateAuction",e,{headers:{TOKEN:this.user.token,"Content-Type":"multipart/form-data"}}).then((()=>{alert("등록 완료!"),this.$router.push("/auction")})).catch((t=>{console.log(t)})):R().post("/api/registAuction",e,{headers:{TOKEN:this.user.token,"Content-Type":"multipart/form-data"}}).then((()=>{alert("등록 완료!"),this.$router.push("/auction")})).catch((t=>{console.log(t)}))},isNumber(t){if(Number.isNaN(t))return!1;let e=Number(t);return!!Number.isInteger(e)&&e>0}}},L=a(89);const Q=(0,L.Z)(j,[["render",J]]);var X=Q}}]);
//# sourceMappingURL=932.8021abc5.js.map