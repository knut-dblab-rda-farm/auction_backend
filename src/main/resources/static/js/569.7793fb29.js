"use strict";(self["webpackChunkrealvue"]=self["webpackChunkrealvue"]||[]).push([[569],{8099:function(){},6499:function(e,t,n){n.d(t,{Z:function(){return w}});var s=n(3396),a=n(9242),l=n(7139),o=n(8521),u=n(7853);const i=e=>((0,s.dD)("data-v-039248a3"),e=e(),(0,s.Cn)(),e),r={class:"auth-contain"},d={key:0,class:"auth-box"},c=i((()=>(0,s._)("p",{class:"auth-title"},"인증번호를 입력해주세요!",-1))),h={class:"auth"},m={class:"timer"};function p(e,t,n,i,p,f){return(0,s.wg)(),(0,s.iD)("div",r,[(0,s.Wm)(o.D,{cols:"12"},{default:(0,s.w5)((()=>[!0===p.auth.phoneAuthState?((0,s.wg)(),(0,s.iD)("div",d,[c,(0,s._)("div",h,[(0,s.wy)((0,s._)("input",{type:"number",id:"authInput","onUpdate:modelValue":t[0]||(t[0]=e=>p.auth.authInput=e),placeholder:"인증번호를 입력해주세요.",class:"auth-input"},null,512),[[a.nr,p.auth.authInput]]),(0,s._)("p",m,(0,l.zw)(String(Math.floor(p.auth.authCounter/6e4%60)).padStart(2,"0"))+" : "+(0,l.zw)(String(Math.floor(p.auth.authCounter/1e3%60)).padStart(2,"0")),1),(0,s._)("button",{class:"auth-complete-btn",onClick:t[1]||(t[1]=t=>e.$emit("authRes",{authInput:this.auth.authInput,id:this.id,phoneAuthNumber:this.phoneAuthNumber,phonenum:this.phonenum}))},"확인")])])):(0,s.kq)("",!0),(0,s.Wm)(u.h,{class:"inputBox",modelValue:p.phonenum,"onUpdate:modelValue":t[2]||(t[2]=e=>p.phonenum=e),label:"핸드폰 번호",rules:e.phonenum_rule},null,8,["modelValue","rules"]),(0,s._)("button",{class:"auth-button",onClick:t[3]||(t[3]=e=>f.authState())},"인증 번호 받기")])),_:1})])}var f=n(6265),g=n.n(f),_={props:{info:{checkUser:String,name:String,email:String}},data(){return{auth:{phoneAuthState:!1,authCounter:18e4,authInput:"",min:0,sec:0,authRes:0,authRes:!0},id:null,phoneAuthNumber:null,phonenum:null}},unmounted(){this.auth.authCounter=0},methods:{authState(){console.log(this.info),console.log(this.phonenum),this.phonenum.length>=8?(this.auth.phoneAuthState=!0,g().post("/api/findPassword",{checkUser:this.info.checkUser,name:this.info.name,email:this.info.email,phonenum:this.phonenum}).then((e=>{console.log(e.data),this.id=e.data.id,this.phoneAuthNumber=e.data.phoneAuthNumber,this.auth.authInput=this.phoneAuthNumber,document.getElementById("authInput").value=this.phoneAuthNumber,console.log(this.auth.authInput)})).catch((e=>{console.log(e)})),setInterval((()=>{this.auth.authCounter-=1e3,0===this.auth.authCounter&&(alert("시간이 초과되었습니다."),window.location.reload(!0))}),1e3)):alert("핸드폰 번호를 입력해주세요!")},authReq(){console.log(this.auth.authInput)}}},b=n(89);const v=(0,b.Z)(_,[["render",p],["__scopeId","data-v-039248a3"]]);var w=v},7170:function(e,t,n){n.d(t,{Z:function(){return _}});var s=n(3396),a=n(9242),l=n(8521);const o=e=>((0,s.dD)("data-v-a4c25832"),e=e(),(0,s.Cn)(),e),u={class:"auth-contain"},i={class:"auth-box"},r=o((()=>(0,s._)("input",{type:"text",id:"postcode",class:"information-form__input",placeholder:"우편번호"},null,-1))),d=o((()=>(0,s._)("input",{type:"text",id:"roadAddress",class:"information-form__input",placeholder:"도로명 주소"},null,-1))),c=o((()=>(0,s._)("br",null,null,-1))),h=o((()=>(0,s._)("br",null,null,-1)));function m(e,t,n,o,m,p){return(0,s.wg)(),(0,s.iD)("div",u,[(0,s.Wm)(l.D,{cols:"12"},{default:(0,s.w5)((()=>[(0,s._)("div",i,[(0,s._)("button",{class:"auth-complete-btn",onClick:t[0]||(t[0]=e=>p.search())},"주소 검색"),r,d,c,this.addressInfo.isConsumer?(0,s.wy)(((0,s.wg)(),(0,s.iD)("input",{key:0,type:"text",id:"detailAddress",class:"information-form__input",placeholder:"상세 주소","onUpdate:modelValue":t[1]||(t[1]=e=>m.c_detail_location=e)},null,512)),[[a.nr,m.c_detail_location]]):(0,s.kq)("",!0),h]),(0,s._)("button",{class:"auth-button",onClick:t[2]||(t[2]=t=>e.$emit("searchAddressRes",{zipcode:this.zipcode,address:this.address,c_detail_location:this.c_detail_location}))},"주소 확인")])),_:1})])}var p={props:{addressInfo:{zipcode:String,address:String,c_detail_location:String,isConsumer:Boolean}},data(){return{user:JSON.parse(localStorage.getItem("user")),zipcode:"",address:"",c_detail_location:""}},mounted(){null!=this.user&&(this.zipcode=this.addressInfo.zipcode,this.address=this.addressInfo.address,this.c_detail_location=this.addressInfo.c_detail_location),console.log("addressInfo: "+this.addressInfo.zipcode),console.log("addressInfo: "+this.addressInfo.address),console.log("addressInfo: "+this.addressInfo.isConsumer),document.getElementById("postcode").value="우편번호: "+this.addressInfo.zipcode,document.getElementById("roadAddress").value="주소: "+this.addressInfo.address,this.addressInfo.isConsumer&&(document.getElementById("detailAddress").value="상세 주소: "+this.addressInfo.c_detail_location)},methods:{search(){new window.daum.Postcode({oncomplete:e=>{var t=e.roadAddress,n="";""!==e.bname&&/[동|로|가]$/g.test(e.bname)&&(n+=e.bname),""!==e.buildingName&&"Y"===e.apartment&&(n+=""!==n?", "+e.buildingName:e.buildingName),""!==n&&(n=" ("+n+")"),document.getElementById("postcode").value="우편번호: "+e.zonecode,document.getElementById("roadAddress").value="주소: "+t,this.zipcode=e.zonecode,this.address=t}}).open()}}},f=n(89);const g=(0,f.Z)(p,[["render",m],["__scopeId","data-v-a4c25832"]]);var _=g},4569:function(e,t,n){n.r(t),n.d(t,{default:function(){return W}});var s=n(3396),a=n(9242),l=n(6422),o=(n(6699),n(8099),n(1138)),u=n(7139),i=n(1107);const r=["sm","md","lg","xl","xxl"],d=["start","end","center"];function c(e,t){return r.reduce(((n,s)=>(n[e+(0,u.kC)(s)]=t(),n)),{})}const h=e=>[...d,"baseline","stretch"].includes(e),m=c("align",(()=>({type:String,default:null,validator:h}))),p=e=>[...d,"space-between","space-around"].includes(e),f=c("justify",(()=>({type:String,default:null,validator:p}))),g=e=>[...d,"space-between","space-around","stretch"].includes(e),_=c("alignContent",(()=>({type:String,default:null,validator:g}))),b={align:Object.keys(m),justify:Object.keys(f),alignContent:Object.keys(_)},v={align:"align",justify:"justify",alignContent:"align-content"};function w(e,t,n){let s=v[e];if(null!=n){if(t){const n=t.replace(e,"");s+=`-${n}`}return s+=`-${n}`,s.toLowerCase()}}const S=(0,i.a)({name:"VRow",props:{dense:Boolean,noGutters:Boolean,align:{type:String,default:null,validator:h},...m,justify:{type:String,default:null,validator:p},...f,alignContent:{type:String,default:null,validator:g},..._,...(0,o.Q)()},setup(e,t){let{slots:n}=t;const a=(0,s.Fl)((()=>{const t=[];let n;for(n in b)b[n].forEach((s=>{const a=e[s],l=w(n,s,a);l&&t.push(l)}));return t.push({"v-row--no-gutters":e.noGutters,"v-row--dense":e.dense,[`align-${e.align}`]:e.align,[`justify-${e.justify}`]:e.justify,[`align-content-${e.alignContent}`]:e.alignContent}),t}));return()=>{var t;return(0,s.h)(e.tag,{class:["v-row",a.value]},null==(t=n.default)?void 0:t.call(n))}}});var y=n(8521),I=n(7853);const k=e=>((0,s.dD)("data-v-18041a9c"),e=e(),(0,s.Cn)(),e),A={class:"signup-contain"},C=k((()=>(0,s._)("header",{class:"welcome-header"},[(0,s._)("h1",{class:"welcome-header__title"},"회 원 가 입")],-1))),$=k((()=>(0,s._)("br",null,null,-1))),z=k((()=>(0,s._)("br",null,null,-1)));function x(e,t,n,o,u,i){const r=(0,s.up)("SearchAddress"),d=(0,s.up)("Auth");return(0,s.wg)(),(0,s.iD)("div",A,[C,(0,s.Wm)(l.O,{ref:"form","lazy-validation":"",onSubmit:(0,a.iM)(e.SignupForm,["prevent"])},{default:(0,s.w5)((()=>[(0,s.Wm)(S,null,{default:(0,s.w5)((()=>[(0,s.Wm)(y.D,{cols:"12"},{default:(0,s.w5)((()=>[(0,s.Wm)(I.h,{class:"inutBox",modelValue:u.name,"onUpdate:modelValue":t[0]||(t[0]=e=>u.name=e),label:"이름*",rules:u.name_rule,required:""},null,8,["modelValue","rules"])])),_:1}),(0,s.Wm)(y.D,{cols:"12"},{default:(0,s.w5)((()=>[(0,s.Wm)(I.h,{class:"inutBox",modelValue:u.email,"onUpdate:modelValue":t[1]||(t[1]=e=>u.email=e),label:"이메일*",rules:u.emailRules,disabled:"ins"!=u.state,required:""},null,8,["modelValue","rules","disabled"])])),_:1}),(0,s._)("button",{class:"login-form__btn_right",onClick:t[2]||(t[2]=e=>i.existEmail())},"이메일 중복 검사"),(0,s.Wm)(y.D,{cols:"12"},{default:(0,s.w5)((()=>[(0,s.Wm)(I.h,{class:"inutBox",modelValue:u.passwd,"onUpdate:modelValue":t[3]||(t[3]=e=>u.passwd=e),label:"비밀번호*",type:"password",rules:u.passwd_rule},null,8,["modelValue","rules"])])),_:1}),(0,s.Wm)(y.D,{cols:"12"},{default:(0,s.w5)((()=>[(0,s.Wm)(I.h,{class:"inutBox",modelValue:u.passwd_chk,"onUpdate:modelValue":t[4]||(t[4]=e=>u.passwd_chk=e),label:"비밀번호 확인*",type:"password",rules:u.passwd_rule2},null,8,["modelValue","rules"])])),_:1}),0==this.urlState?((0,s.wg)(),(0,s.j4)(r,{key:0,addressInfo:u.addressInfo,onSearchAddressRes:i.searchAddressResult},null,8,["addressInfo","onSearchAddressRes"])):(0,s.kq)("",!0),(0,s.Wm)(d,{info:u.info,onAuthRes:i.phonenumAuthResult},null,8,["info","onAuthRes"])])),_:1}),$,z,(0,s._)("button",{class:"login-form__btn_right",onClick:t[5]||(t[5]=e=>i.signup())},"다음")])),_:1},8,["onSubmit"])])}var N=n(6265),V=n.n(N),E=n(6499),R=n(7170),B={name:"SignupForm",components:{Auth:E.Z,SearchAddress:R.Z},data(){return{addressInfo:{zipcode:"",address:"",c_detail_location:"",isConsumer:"/signup"==this.$route.fullPath},info:{checkUser:"signup",name:null,email:null},phonenumAuth:!1,addressCheck:!1,name:null,email:null,passwd:null,phonenum:null,zipcode:null,location:null,c_detail_location:null,dialog:!1,state:"ins",authList:[{name:"관리자",value:"A"},{name:"일반 사용자",value:"M"}],email:"",emailRules:[e=>!!e||"이메일은 필수 입력사항입니다.",e=>/^[A-Za-z0-9_\.\-]+@[A-Za-z0-9\-]+\.[A-Za-z0-9\-]+/.test(e)||"유효하지 않은 형식의 E-mail 입니다."],name:"",name_rule:[e=>!!e||"이름은 필수 입력사항입니다.",e=>!(e&&e.length>=10)||"이름은 10자 이상 입력할 수 없습니다.",e=>!/[~!@#$%^&*()_+|<>?:{}]/.test(e)||"이름에는 특수문자를 사용할 수 없습니다."],passwd:"",passwd_chk:"",passwd_rule:[e=>"ins"!==this.state||(!!e||"패스워드는 필수 입력사항입니다."),e=>!(e&&e.length>=30)||"패스워드는 30자 이상 입력할 수 없습니다."],passwd_rule2:[e=>"ins"!==this.state||(!!e||"패스워드는 필수 입력사항입니다."),e=>!(e&&e.length>=30)||"패스워드는 30자 이상 입력할 수 없습니다.",e=>e===this.passwd||"패스워드가 일치하지 않습니다."],user_auth:"",user_auth_rule:[e=>!!e||"권한은 필수 선택 사항입니다."],phonenum:"",phonenum_rule:[e=>"ins"!==this.state||(!!e||"핸드폰 번호는 필수 입력사항입니다."),e=>!(e&&e.length>=12)||"핸드폰 번호는 12자 이상 입력할 수 업습니다.",e=>/[0-9]/.test(e)||"숫자만 입력해주세요"],urlState:0}},mounted(){"/signup"===this.$route.fullPath?(this.urlState=0,console.log(this.urlState)):"/signupFarm"===this.$route.fullPath&&(this.urlState=1,console.log(this.urlState))},methods:{existEmail(){if(!this.email)return alert("유효하지 않은 형식의 E-mail 입니다.");this.$store.dispatch("existEmail",this.email)},searchAddressResult(e){if(console.log("event: ",e),this.zipcode=e.zipcode,this.location=e.address,this.c_detail_location=e.c_detail_location,""==this.zipcode||"우편번호: "==this.zipcode||""==this.location||"주소: "==this.location||""==this.c_detail_location||null==this.c_detail_location)return alert("주소를 모두 입력해주세요!");console.log("this.c_detail_location: "+this.c_detail_location),this.addressCheck=!0,alert("주소 입력이 완료되었습니다!")},phonenumAuthResult(e){console.log("event: ",e),e.authInput==e.phoneAuthNumber?(this.phonenumAuth=!0,this.phonenum=e.phonenum,alert("인증 완료되었습니다.")):alert("인증번호가 맞지 않습니다!")},async signup(){let e;await this.$refs.form.validate().then((t=>{console.log("res: "+t),e=t.valid,console.log(t)})).catch((e=>{console.log(e)})),console.log(e),console.log(this.$store.state.existEmail),e?this.$store.state.existEmail?alert("이메일 중복 확인을 완료해주세요!"):0!=this.urlState||this.addressCheck?this.phonenumAuth?1==this.urlState?(console.log("tsdfsdf: "+this.name),this.$store.commit("FARM_INFO",{name:this.name,email:this.email,passwd:this.passwd,phonenum:this.phonenum,checkUser:"farm"}),1==this.$store.state.kindOfFarm?this.$router.push({name:"farm_user_info"}):this.$router.push({name:"farm_biz_info"})):(console.log(),V().post("/api/signupConsumer",{c_name:this.name,c_email:this.email,c_passwd:this.passwd,c_phonenum:this.phonenum,c_zipcode:this.zipcode,c_location:this.location,c_detail_location:this.c_detail_location}).then((e=>{console.log(e),0==e.data?alert("회원가입 실패.."):(alert("회원가입 성공.."),console.log("main으로!!"),console.log(e.data),localStorage.setItem("expire",JSON.stringify(Date.now()+864e5)),localStorage.setItem("user",JSON.stringify(e.data)),localStorage.setItem("checkUser","consumer"),localStorage.setItem("id",e.data.consumer_id),this.$store.commit("TOKEN_SAVE",e.data.token),this.$router.push({name:"main"}))})).catch((e=>{console.log(e)}))):alert("핸드폰 번호 인증을 완료해주세요!"):alert("주소 입력을 완료해주세요!"):console.log("다른 거 확인하길 바람")}}},D=n(89);const j=(0,D.Z)(B,[["render",x],["__scopeId","data-v-18041a9c"]]);var W=j},8521:function(e,t,n){n.d(t,{D:function(){return m}});n(6699),n(8099);var s=n(1138),a=n(7139),l=n(3396),o=n(1107);const u=["sm","md","lg","xl","xxl"],i=(()=>u.reduce(((e,t)=>(e[t]={type:[Boolean,String,Number],default:!1},e)),{}))(),r=(()=>u.reduce(((e,t)=>(e["offset"+(0,a.kC)(t)]={type:[String,Number],default:null},e)),{}))(),d=(()=>u.reduce(((e,t)=>(e["order"+(0,a.kC)(t)]={type:[String,Number],default:null},e)),{}))(),c={col:Object.keys(i),offset:Object.keys(r),order:Object.keys(d)};function h(e,t,n){let s=e;if(null!=n&&!1!==n){if(t){const n=t.replace(e,"");s+=`-${n}`}return"col"===e&&(s="v-"+s),"col"!==e||""!==n&&!0!==n?(s+=`-${n}`,s.toLowerCase()):s.toLowerCase()}}const m=(0,o.a)({name:"VCol",props:{cols:{type:[Boolean,String,Number],default:!1},...i,offset:{type:[String,Number],default:null},...r,order:{type:[String,Number],default:null},...d,alignSelf:{type:String,default:null,validator:e=>["auto","start","end","center","baseline","stretch"].includes(e)},...(0,s.Q)()},setup(e,t){let{slots:n}=t;const s=(0,l.Fl)((()=>{const t=[];let n;for(n in c)c[n].forEach((s=>{const a=e[s],l=h(n,s,a);l&&t.push(l)}));const s=t.some((e=>e.startsWith("v-col-")));return t.push({"v-col":!s||!e.cols,[`v-col-${e.cols}`]:e.cols,[`offset-${e.offset}`]:e.offset,[`order-${e.order}`]:e.order,[`align-self-${e.alignSelf}`]:e.alignSelf}),t}));return()=>{var t;return(0,l.h)(e.tag,{class:s.value},null==(t=n.default)?void 0:t.call(n))}}})}}]);
//# sourceMappingURL=569.7793fb29.js.map