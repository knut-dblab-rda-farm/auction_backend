"use strict";(self["webpackChunkrealvue"]=self["webpackChunkrealvue"]||[]).push([[585],{5140:function(t,a,e){e.d(a,{Z:function(){return D}});var i=e(3396),s=e(7139),n=e(3289);const o=t=>((0,i.dD)("data-v-356d296a"),t=t(),(0,i.Cn)(),t),c={class:"header"},r={class:"navLi"},l=(0,i.Uk)("mdi-home"),u={class:"navLi"},g={class:"navLi"},d=o((()=>(0,i._)("i",{class:"fas fa-chevron-left fa-2x","aria-hidden":"true"},null,-1))),h=[d];function _(t,a,e,o,d,_){const m=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("header",c,[(0,i._)("nav",null,[(0,i._)("li",r,[(0,i.Wm)(m,{to:"/"},{default:(0,i.w5)((()=>[(0,i.Wm)(n.t,null,{default:(0,i.w5)((()=>[l])),_:1})])),_:1})]),(0,i._)("li",u,(0,s.zw)(e.headerProps),1),(0,i._)("li",g,[(0,i._)("p",{class:"nav__link",onClick:a[0]||(a[0]=t=>_.goBack())},h)])])])}var m={props:{headerProps:String},methods:{goBack(){this.$router.go(-1)}}},p=e(89);const k=(0,p.Z)(m,[["render",_],["__scopeId","data-v-356d296a"]]);var D=k},585:function(t,a,e){e.r(a),e.d(a,{default:function(){return B}});var i=e(3396),s=e(7139);const n={class:"contain",ref:"items"},o=["src","onClick"],c={class:"content"},r=["onClick"],l={class:"name"},u={class:"auction"},g={class:"final-bid"},d={class:"current-auction"},h={class:"auctionBtns"},_={key:0,class:"auctionBtn-ing"},m={key:1,class:"auctionBtn"},p=["onClick"],k={key:3,class:"auctionBtn"},D=["onClick"],w={key:5,class:"reviewBtn-end"},v=["onClick"];function f(t,a,e,f,y,S){const b=(0,i.up)("Header"),$=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i.Wm)(b,{headerProps:y.headerProps},null,8,["headerProps"]),(0,i._)("div",n,[(0,i._)("p",{style:(0,s.j5)([0===y.getData.length?{display:"block"}:{display:"none"}]),class:"not-auction-title"},"경매 내역이 없습니다.",4),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(y.getData.length,((t,a)=>((0,i.wg)(),(0,i.iD)("div",{class:"item",key:a},[(0,i._)("img",{src:`/product_images/${y.getData[a].product_img_name}.png`,alt:"",width:"90",height:"90",onClick:t=>S.navigateAuction(y.getData[a].auction_Id)},null,8,o),(0,i._)("div",c,[(0,i._)("div",{onClick:t=>S.navigateAuction(y.getData[a].auction_Id)},[(0,i._)("p",l,(0,s.zw)(y.getData[a].auction_name)+"("+(0,s.zw)(y.getData[a].p_status)+")",1),(0,i._)("div",u,[(0,i._)("p",g,"현재경매 : "+(0,s.zw)(y.getData[a].bid_price.toLocaleString())+"원",1),(0,i._)("p",d,"최종낙찰: "+(0,s.zw)(y.getData[a].a_max_price.toLocaleString())+"원",1)])],8,r),(0,i._)("div",h,[y.getData[a].bid_status?((0,i.wg)(),(0,i.iD)("button",_,"경매중")):(0,i.kq)("",!0),y.getData[a].bid_status?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("button",m,"경매종료")),y.getData[a].bid_status||y.getData[a].payment_status||"consumer"!==y.checkUser?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("button",{key:2,class:"auctionBtn",onClick:t=>S.navigateAuctionPayment(y.getData[a])},"결제하기",8,p)),y.getData[a].bid_status||y.getData[a].payment_status||"farm"!==y.checkUser?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("button",k,"결제 대기")),y.getData[a].payment_status?((0,i.wg)(),(0,i.iD)("button",{key:4,class:"auctionBtn",onClick:t=>S.navigateAuctionPaymentHistory(y.getData[a].auction_Id)},"결제 내역",8,D)):(0,i.kq)("",!0),0===y.writeUrlState[a]?((0,i.wg)(),(0,i.iD)("button",w,"작성완료")):(0,i.kq)("",!0),!1===y.getData[a].bid_status?((0,i.wg)(),(0,i.j4)($,{key:6,to:`/farm_mypage_auction/writeReview/${y.getData[a].auction_Id}`},{default:(0,i.w5)((()=>[1===y.writeUrlState[a]&&"consumer"===y.checkUser?((0,i.wg)(),(0,i.iD)("button",{key:0,onClick:t=>S.setReviewData(a),class:"reviewBtn"},"후기작성",8,v)):(0,i.kq)("",!0)])),_:2},1032,["to"])):(0,i.kq)("",!0)])])])))),128))],512)])}var y=e(6265),S=e.n(y),b=e(5140),$=e(4806),C=e.n($),U={components:{Header:b.Z},data(){return{headerProps:"경매 내역",reviewState:1,getData:[],auctionState:!0,user:JSON.parse(localStorage.getItem("user")),checkUser:localStorage.getItem("checkUser"),writeUrlState:[],startLimit:0}},async mounted(){window.addEventListener("scroll",C().throttle((()=>{this.infiniteScroll()}),500),!0),console.log(this.$store.state.user.checkUser),console.log(this.$store.state.user.id),await this.getDatas()},methods:{getDatas(){S().get(`/api/mypageAuctionDetails/${localStorage.getItem("checkUser")}/${localStorage.getItem("id")}/${this.startLimit}`,{headers:{TOKEN:this.user.token}}).then((t=>{console.log(t.data),this.getData.push(t.data),this.getData=this.getData.flat();for(let a=0;a<this.getData.length;a++)console.log(this.getData[a].consumer_review),this.getData[a].consumer_review?this.writeUrlState.push(0):this.writeUrlState.push(1);this.startLimit+=5,console.log(this.writeUrlState)})).catch((t=>{console.log(t)}))},infiniteScroll(){if("/farm_mypage_auction"===this.$route.path){{const{innerHeight:t}=window;Math.round(this.$refs.items.scrollTop+window.innerHeight)>=this.$refs.items.scrollHeight&&(console.log("스크롤 실행"),this.getDatas())}console.log(innerHeight)}},setReviewData(t){console.log(this.getData[t]),this.$store.commit("GET_REVIEW_DATA",this.getData[t])},navigateAuction(t){S().get(`/api/auctionInfo/${t}`,{headers:{TOKEN:this.user.token}}).then((a=>{console.log(a.data),this.$router.push({name:"auction_detail",params:{id:t,auction:JSON.stringify(a.data)}})})).catch((t=>{console.log(t)}))},navigateAuctionPayment(t){this.$router.push({name:"farm_calculate",params:{id:t.auction_Id,auction:JSON.stringify(t)}})},navigateAuctionPaymentHistory(t){S().get(`/api/order/${t}`,{headers:{TOKEN:this.user.token}}).then((a=>{console.log(a.data),this.$router.push({name:"farm_calculate_clear",params:{id:t,order:JSON.stringify(a.data)}})})).catch((t=>{console.log(t)}))}}},I=e(89);const A=(0,I.Z)(U,[["render",f],["__scopeId","data-v-2081cd27"]]);var B=A}}]);
//# sourceMappingURL=585.0cf91007.js.map