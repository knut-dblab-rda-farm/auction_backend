"use strict";(self["webpackChunkrealvue"]=self["webpackChunkrealvue"]||[]).push([[982],{7929:function(e,t,s){s.d(t,{Z:function(){return f}});var o=s(3396),i=s(7139);const a=e=>((0,o.dD)("data-v-0063bdd0"),e=e(),(0,o.Cn)(),e),l={class:"main_nav_t_div"},r={class:"main_t_nav"},n={class:"main_t_nav_list"},c=a((()=>(0,o._)("li",{class:"nav__btn"},[(0,o._)("a",{class:"nav__link",href:"alert"},[(0,o._)("i",{class:"fas fa-bell fa-2x","aria-hidden":"true"})])],-1))),d={class:"main_m_li_list"},_={class:"nav_m_link",href:"workout.html"},u={class:"nav__btn"},h=a((()=>(0,o._)("i",{class:"fas fa-chevron-left fa-2x","aria-hidden":"true"},null,-1))),p=[h];function m(e,t,s,a,h,m){return(0,o.wg)(),(0,o.iD)("div",l,[(0,o._)("nav",r,[(0,o._)("ul",n,[c,(0,o._)("li",d,[(0,o._)("p",_,(0,i.zw)(s.headerProps),1)]),(0,o._)("li",u,[(0,o._)("a",{class:"nav__link",onClick:t[0]||(t[0]=t=>e.$router.go(-1))},p)])])])])}var g={props:{headerProps:String}},w=s(89);const v=(0,w.Z)(g,[["render",m],["__scopeId","data-v-0063bdd0"]]);var f=v},6982:function(e,t,s){s.r(t),s.d(t,{default:function(){return ce}});var o=s(3396),i=s(9242),a=s(7139);const l=e=>((0,o.dD)("data-v-1d1d1d29"),e=e(),(0,o.Cn)(),e),r={class:"search-contain"},n={class:"inner"},c={class:"div_search"},d={class:"recentSearchBox"},_=l((()=>(0,o._)("h2",{class:"profileh2"},"최근 검색어",-1))),u={class:"main_div-1"},h={class:"btn_file"},p={for:"inputImage",class:""},m=["onClick"],g={class:"popularityBox"},w=l((()=>(0,o._)("h2",{class:"profileh2"},"인기 검색어",-1))),v={class:"main_div-2"},f={class:"aside_area aside_popular"},k=l((()=>(0,o._)("h3",{class:"h_popular"},[(0,o._)("span")],-1))),b={class:"tbl_home"},y={class:"up"},D={class:"upRow",scope:"row"},$=["onClick"],N={class:"white_div"},C={class:"goods_pay_section"},O={class:"goods_group"},T={ref:"items",class:"goods_group_list"},E=["onClick"],S={class:"goods_thumb"},I=["src"],K={class:"goods_info"},L={class:"goods"},P={class:"name"},H={class:"info"},U=l((()=>(0,o._)("span",{class:"blind"},"상품금액",-1))),A={key:0,class:"state _statusName value_color_green _click(nmp.front.order.timeline.home.list.openDeliveryPopup(/o/orderStatus/deliveryTracking/2022020394386781/ORDER_DELIVERY/api)) _stopDefault"},R={key:1,class:"state _statusName value_color_green _click(nmp.front.order.timeline.home.list.openDeliveryPopup(/o/orderStatus/deliveryTracking/2022020394386781/ORDER_DELIVERY/api)) _stopDefault"},z={class:"guide"},M={class:"seller_item"},x={class:"inner"},Y={class:"seller"},B={class:"tel"},W={class:"date"},Z=l((()=>(0,o._)("span",{class:"blind"},"등록일",-1))),F=l((()=>(0,o._)("br",null,null,-1))),V=l((()=>(0,o._)("br",null,null,-1))),q={style:{display:"none"}};function G(e,t,s,l,G,J){const j=(0,o.up)("Header"),Q=(0,o.up)("bottom-nav");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o._)("div",r,[(0,o._)("div",n,[(0,o.Wm)(j,{headerProps:G.headerProps},null,8,["headerProps"]),(0,o._)("div",c,[(0,o.wy)((0,o._)("input",{class:"input_search",type:"text",placeholder:"검색어 입력",onKeyup:t[0]||(t[0]=(0,i.D2)((e=>J.searchAuction(G.keyword)),["enter"])),"onUpdate:modelValue":t[1]||(t[1]=e=>G.keyword=e)},null,544),[[i.nr,G.keyword]]),(0,o._)("button",{class:"button_search",onClick:t[2]||(t[2]=e=>J.searchAuction(G.keyword))},"검색")]),(0,o._)("fieldset",d,[_,(0,o._)("div",u,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(this.$store.state.keywordList,((e,t)=>((0,o.wg)(),(0,o.iD)("div",{key:t},[(0,o._)("span",h,[(0,o._)("label",p,[(0,o._)("b",{id:"btnChangeProfile",class:"popularityList",onClick:t=>J.searchAuction(e)},[(0,o._)("em",null,(0,a.zw)(t+1)+".",1),(0,o.Uk)(" "+(0,a.zw)(e),1)],8,m)])])])))),128))])]),(0,o._)("fieldset",g,[w,(0,o._)("div",v,[(0,o._)("div",f,[k,(0,o._)("table",b,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(this.$store.state.popularKeywordList,((e,t)=>((0,o.wg)(),(0,o.iD)("tbody",{key:t},[(0,o._)("tr",y,[(0,o._)("th",D,[(0,o._)("em",null,(0,a.zw)(t+1)+".",1),(0,o._)("span",{onClick:t=>J.searchAuction(e)},(0,a.zw)(e),9,$)])])])))),128))])])])]),(0,o._)("fieldset",null,[(0,o._)("div",N,[(0,o._)("div",C,[(0,o._)("div",O,[(0,o._)("ul",T,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(this.$store.state.searchAuctionList,((e,t)=>((0,o.wg)(),(0,o.iD)("li",{key:e.auction_Id,id:"_rowLi20220203162708CHK2022020394386781",class:"goods_pay_item _interlockNo20220211200904406814"},[(0,o._)("div",{onClick:s=>J.navigateProduct(e.auction_Id,t),class:"goods_item"},[(0,o._)("p",S,[(0,o._)("img",{src:`/product_images/${e.productDTO.product_img_name}.png`,alt:"",width:"90",height:"90"},null,8,I)]),(0,o._)("div",K,[(0,o._)("div",L,[(0,o._)("p",P,(0,a.zw)(e.auction_name),1),(0,o._)("ul",H,[(0,o._)("li",null,[U,(0,o.Uk)((0,a.zw)(e.bid_price)+"원",1)])])]),1===e.bid_status?((0,o.wg)(),(0,o.iD)("p",A,(0,a.zw)(J.updateDeadlineDate(e.deadline_date))+" 경매 종료",1)):(0,o.kq)("",!0),0===e.bid_status?((0,o.wg)(),(0,o.iD)("p",R," 최종 낙찰가 "+(0,a.zw)(e.a_max_price.toLocaleString())+"원",1)):(0,o.kq)("",!0),(0,o._)("p",z,(0,a.zw)(e.productDTO.p_explanation),1)])],8,E),(0,o._)("div",M,[(0,o._)("div",x,[(0,o._)("span",Y,(0,a.zw)(e.f_farm_name),1),(0,o._)("span",B,"0"+(0,a.zw)(e.f_phonenum.toString().replace(/[^0-9]/g,"").replace(/(^02|^0505|^1[0-9]{1}|^0[0-9]{4})([0-9]+)?([0-9]{4})$/,"$1-$2-$3").replace("--","-")),1),(0,o._)("li",W,[Z,(0,o.Uk)(" "+(0,a.zw)(e.productDTO.p_reg_date),1)]),F,V])])])))),128))],512)])])])])])]),(0,o._)("p",q,(0,a.zw)(G.now),1),(0,o.Wm)(Q,{class:"bottom"})],64)}var J=s(6265),j=s.n(J),Q=s(3266),X=s.n(Q),ee=s(4029),te=s.n(ee),se=s(7929),oe=s(3454),ie=s(4806),ae=s.n(ie),le={components:{Header:se.Z,bottomNav:oe["default"]},name:"search",data(){return{headerProps:"Search",checkUser:"consumer",id:1,preKeyword:"",keyword:"",startLimit:0,NUMBER_OF_AUCTION:5,user:JSON.parse(localStorage.getItem("user")),isMaxLimit:!1,now:0}},created(){this.connect(),this.initPopularKeyword()},mounted(){window.addEventListener("scroll",ae().throttle((()=>{this.infiniteScroll(),this.height=document.documentElement.scrollHeight}),500),!0),this.updateNow(),console.log(this.updateNow.bind(this)),setInterval(this.updateNow.bind(this),1e3),console.log("-----updateNow--")},methods:{infiniteScroll(){if(""!==this.keyword&&(console.log(this.$refs.items.scrollTop+innerHeight),console.log(this.$refs.items.scrollHeight),console.log(this.$route.path),"/search"===this.$route.path)){const{innerHeight:e}=window;Math.round(this.$refs.items.scrollTop+e)>=this.$refs.items.scrollHeight&&(console.log("스크롤 실행"),this.searchAuction(this.preKeyword)),console.log(e)}},updateNow(){console.log("-------"),this.now=Math.round(Date.now()/1e3)},updateDeadlineDate(e){let t=new Date;t.setFullYear(Number(e.substr(0,4))),t.setMonth(Number(e.substr(5,2))-1),t.setDate(Number(e.substr(8,2))),t.setHours(Number(e.substr(11,2))),t.setMinutes(Number(e.substr(14,2))),t.setSeconds(Number(e.substr(17,2)));let s=Math.round(t.getTime()/1e3)-this.now;if(s<0)return"";let o=Math.floor(s/86400),i=Math.floor(s%86400),a=Math.floor(i/3600),l=Math.floor(i%3600/60),r=Math.floor(i%3600%60),n="";return 0!=o&&(n+=o+"일 "),0!=a&&(n+=a+"시간 "),0!=l&&(n+=l+"분 "),0!=r&&(n+=r+"초 후"),n},searchAuction(e){""!==e?(console.log("keyword: "+e),this.preKeyword!=e&&(this.$store.commit("RESET_SEARCH_AUCTION_LIST"),this.startLimit=0),this.preKeyword=e,this.$store.commit("PUSH_KEYWORD_LIST",e),j().get(`/api/searchAuction/${this.checkUser}/${this.id}/${e}/${this.startLimit}`,{headers:{TOKEN:this.user.token}}).then((e=>{if("token"!=e.headers.token&&(this.$store.commit("LOGOUT"),this.$router.push("/login")),console.log(e.data),e.data.length)for(let t of e.data)this.$store.commit("PUSH_SEARCH_AUCTION",t);this.startLimit+=this.NUMBER_OF_AUCTION})).catch((e=>{console.log(e)})),this.keyword=""):""===e&&""===this.preKeyword&&alert("검색어를 입력해주세요!")},connect(){const e="/socket";let t=new(te())(e);this.stompClient=X().over(t);let s={TOKEN:this.$store.state.config.headers.TOKEN};this.stompClient.connect(s,(e=>{this.connected=!0,console.log("소켓 연결 성공",e),this.stompClient.subscribe("/send_bidding",(e=>{const t=JSON.parse(e.body);void 0!=t.auction_Id&&this.$store.commit("UPDATE_SEARCH_BID_PRICE",t)}))}),(e=>{console.log("소켓 연결 실패",e),this.connected=!1}))},initPopularKeyword(){j().get("/api/popularKeyword",{headers:{TOKEN:this.user.token}}).then((e=>{"token"!=e.headers.token&&(this.$store.commit("LOGOUT"),this.$router.push("/login")),this.$store.commit("INIT_POPULAR_KEYWORD_LIST",e.data)})).catch((e=>{console.log(e)}))},navigateProduct(e,t){this.$router.push({name:"auction_detail",params:{id:e,index:t}})}}},re=s(89);const ne=(0,re.Z)(le,[["render",G],["__scopeId","data-v-1d1d1d29"]]);var ce=ne}}]);
//# sourceMappingURL=982.a8dec69a.js.map