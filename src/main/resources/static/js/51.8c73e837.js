"use strict";(self["webpackChunkrealvue"]=self["webpackChunkrealvue"]||[]).push([[51],{7929:function(s,e,t){t.d(e,{Z:function(){return f}});var o=t(3396),i=t(7139);const a=s=>((0,o.dD)("data-v-0063bdd0"),s=s(),(0,o.Cn)(),s),l={class:"main_nav_t_div"},n={class:"main_t_nav"},r={class:"main_t_nav_list"},c=a((()=>(0,o._)("li",{class:"nav__btn"},[(0,o._)("a",{class:"nav__link",href:"alert"},[(0,o._)("i",{class:"fas fa-bell fa-2x","aria-hidden":"true"})])],-1))),d={class:"main_m_li_list"},_={class:"nav_m_link",href:"workout.html"},h={class:"nav__btn"},u=a((()=>(0,o._)("i",{class:"fas fa-chevron-left fa-2x","aria-hidden":"true"},null,-1))),p=[u];function m(s,e,t,a,u,m){return(0,o.wg)(),(0,o.iD)("div",l,[(0,o._)("nav",n,[(0,o._)("ul",r,[c,(0,o._)("li",d,[(0,o._)("p",_,(0,i.zw)(t.headerProps),1)]),(0,o._)("li",h,[(0,o._)("a",{class:"nav__link",onClick:e[0]||(e[0]=e=>s.$router.go(-1))},p)])])])])}var g={props:{headerProps:String}},v=t(89);const w=(0,v.Z)(g,[["render",m],["__scopeId","data-v-0063bdd0"]]);var f=w},6051:function(s,e,t){t.r(e),t.d(e,{default:function(){return ns}});var o=t(3396),i=t(9242),a=t(7139);const l=s=>((0,o.dD)("data-v-66dd8725"),s=s(),(0,o.Cn)(),s),n={class:"search-contain"},r={class:"inner"},c={class:"div_search"},d={class:"recentSearchBox"},_=l((()=>(0,o._)("h2",{class:"profileh2"},"최근 검색어",-1))),h={class:"main_div-1"},u={class:"btn_file"},p={for:"inputImage",class:""},m=["onClick"],g={class:"popularityBox"},v=l((()=>(0,o._)("h2",{class:"profileh2"},"인기 검색어",-1))),w={class:"main_div-2"},f={class:"aside_area aside_popular"},k=l((()=>(0,o._)("h3",{class:"h_popular"},[(0,o._)("span")],-1))),y={class:"tbl_home"},b={class:"up"},$={class:"upRow",scope:"row"},C=["onClick"],O={class:"white_div"},D={class:"goods_pay_section"},T={class:"goods_group"},E={ref:"items",class:"goods_group_list"},K=["onClick"],I={class:"goods_thumb"},S=["src"],L={class:"goods_info"},P={class:"goods"},U={class:"name"},A={class:"info"},H=l((()=>(0,o._)("span",{class:"blind"},"상품금액",-1))),N={class:"state _statusName value_color_green _click(nmp.front.order.timeline.home.list.openDeliveryPopup(/o/orderStatus/deliveryTracking/2022020394386781/ORDER_DELIVERY/api)) _stopDefault"},R={class:"guide"},z={class:"seller_item"},x={class:"inner"},Y={class:"seller"},B={class:"tel"},M={class:"date"},W=l((()=>(0,o._)("span",{class:"blind"},"등록일",-1))),Z=l((()=>(0,o._)("br",null,null,-1))),F=l((()=>(0,o._)("br",null,null,-1)));function G(s,e,t,l,G,J){const V=(0,o.up)("Header"),j=(0,o.up)("bottom-nav");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o._)("div",n,[(0,o._)("div",r,[(0,o.Wm)(V,{headerProps:G.headerProps},null,8,["headerProps"]),(0,o._)("div",c,[(0,o.wy)((0,o._)("input",{class:"input_search",type:"text",placeholder:"검색어 입력",onKeyup:e[0]||(e[0]=(0,i.D2)((s=>J.searchAuction(G.keyword)),["enter"])),"onUpdate:modelValue":e[1]||(e[1]=s=>G.keyword=s)},null,544),[[i.nr,G.keyword]]),(0,o._)("button",{class:"button_search",onClick:e[2]||(e[2]=s=>J.searchAuction(G.keyword))},"검색")]),(0,o._)("fieldset",d,[_,(0,o._)("div",h,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(this.$store.state.keywordList,((s,e)=>((0,o.wg)(),(0,o.iD)("div",{key:e},[(0,o._)("span",u,[(0,o._)("label",p,[(0,o._)("b",{id:"btnChangeProfile",class:"popularityList",onClick:e=>J.searchAuction(s)},[(0,o._)("em",null,(0,a.zw)(e+1)+".",1),(0,o.Uk)(" "+(0,a.zw)(s),1)],8,m)])])])))),128))])]),(0,o._)("fieldset",g,[v,(0,o._)("div",w,[(0,o._)("div",f,[k,(0,o._)("table",y,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(this.$store.state.popularKeywordList,((s,e)=>((0,o.wg)(),(0,o.iD)("tbody",{key:e},[(0,o._)("tr",b,[(0,o._)("th",$,[(0,o._)("em",null,(0,a.zw)(e+1)+".",1),(0,o._)("span",{onClick:e=>J.searchAuction(s)},(0,a.zw)(s),9,C)])])])))),128))])])])]),(0,o._)("fieldset",null,[(0,o._)("div",O,[(0,o._)("div",D,[(0,o._)("div",T,[(0,o._)("ul",E,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(this.$store.state.searchAuctionList,((s,e)=>((0,o.wg)(),(0,o.iD)("li",{key:s.auction_Id,id:"_rowLi20220203162708CHK2022020394386781",class:"goods_pay_item _interlockNo20220211200904406814"},[(0,o._)("div",{onClick:t=>J.navigateProduct(s.auction_Id,e),class:"goods_item"},[(0,o._)("p",I,[(0,o._)("img",{src:`/product_images/${s.productDTO.product_img_name}.png`,alt:"",width:"90",height:"90"},null,8,S)]),(0,o._)("div",L,[(0,o._)("div",P,[(0,o._)("p",U,(0,a.zw)(s.auction_name),1),(0,o._)("ul",A,[(0,o._)("li",null,[H,(0,o.Uk)((0,a.zw)(s.bid_price)+"원",1)])])]),(0,o._)("p",N,(0,a.zw)(s.bid_status)+" ("+(0,a.zw)(s.deadline_date)+" 경매 종료)",1),(0,o._)("p",R,(0,a.zw)(s.productDTO.p_explanation),1)])],8,K),(0,o._)("div",z,[(0,o._)("div",x,[(0,o._)("span",Y,(0,a.zw)(s.f_farm_name),1),(0,o._)("span",B,"0"+(0,a.zw)(s.f_phonenum.toString().replace(/[^0-9]/g,"").replace(/(^02|^0505|^1[0-9]{1}|^0[0-9]{4})([0-9]+)?([0-9]{4})$/,"$1-$2-$3").replace("--","-")),1),(0,o._)("li",M,[W,(0,o.Uk)(" "+(0,a.zw)(s.productDTO.p_reg_date),1)]),Z,F])])])))),128))],512)])])])])])]),(0,o.Wm)(j,{class:"bottom"})],64)}var J=t(6265),V=t.n(J),j=t(3266),q=t.n(j),Q=t(4029),X=t.n(Q),ss=t(7929),es=t(3454),ts=t(4806),os=t.n(ts),is={components:{Header:ss.Z,bottomNav:es["default"]},name:"search",data(){return{headerProps:"Search",checkUser:"consumer",id:1,preKeyword:"",keyword:"",startLimit:0,NUMBER_OF_AUCTION:5,user:JSON.parse(localStorage.getItem("user")),isMaxLimit:!1}},created(){this.connect(),this.initPopularKeyword()},mounted(){window.addEventListener("scroll",os().throttle((()=>{this.infiniteScroll(),this.height=document.documentElement.scrollHeight}),500),!0)},methods:{infiniteScroll(){if(""!==this.keyword&&(console.log(this.$refs.items.scrollTop+innerHeight),console.log(this.$refs.items.scrollHeight),console.log(this.$route.path),"/search"===this.$route.path)){const{innerHeight:s}=window;Math.round(this.$refs.items.scrollTop+s)>=this.$refs.items.scrollHeight&&(console.log("스크롤 실행"),this.searchAuction(this.preKeyword)),console.log(s)}},searchAuction(s){""!==s?(console.log("keyword: "+s),this.preKeyword!=s&&(this.$store.commit("RESET_SEARCH_AUCTION_LIST"),this.startLimit=0),this.preKeyword=s,this.$store.commit("PUSH_KEYWORD_LIST",s),V().get(`/api/searchAuction/${this.checkUser}/${this.id}/${s}/${this.startLimit}`,{headers:{TOKEN:this.user.token}}).then((s=>{if("token"!=s.headers.token&&(this.$store.commit("LOGOUT"),this.$router.push("/login")),console.log(s.data),s.data.length)for(let e of s.data)this.$store.commit("PUSH_SEARCH_AUCTION",e);this.startLimit+=this.NUMBER_OF_AUCTION})).catch((s=>{console.log(s)})),this.keyword=""):""===s&&""===this.preKeyword&&alert("검색어를 입력해주세요!")},connect(){const s="/socket";let e=new(X())(s);this.stompClient=q().over(e);let t={TOKEN:this.$store.state.config.headers.TOKEN};this.stompClient.connect(t,(s=>{this.connected=!0,console.log("소켓 연결 성공",s),this.stompClient.subscribe("/send_bidding",(s=>{const e=JSON.parse(s.body);void 0!=e.auction_Id&&this.$store.commit("UPDATE_SEARCH_BID_PRICE",e)}))}),(s=>{console.log("소켓 연결 실패",s),this.connected=!1}))},initPopularKeyword(){V().get("/api/popularKeyword",{headers:{TOKEN:this.user.token}}).then((s=>{"token"!=s.headers.token&&(this.$store.commit("LOGOUT"),this.$router.push("/login")),this.$store.commit("INIT_POPULAR_KEYWORD_LIST",s.data)})).catch((s=>{console.log(s)}))},navigateProduct(s,e){this.$router.push({name:"auction_detail",params:{id:s,index:e}})}}},as=t(89);const ls=(0,as.Z)(is,[["render",G],["__scopeId","data-v-66dd8725"]]);var ns=ls}}]);
//# sourceMappingURL=51.8c73e837.js.map