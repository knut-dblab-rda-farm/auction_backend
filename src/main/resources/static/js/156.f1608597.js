"use strict";(self["webpackChunkrealvue"]=self["webpackChunkrealvue"]||[]).push([[156],{7929:function(e,s,t){t.d(s,{Z:function(){return f}});var o=t(3396),i=t(7139);const a=e=>((0,o.dD)("data-v-0063bdd0"),e=e(),(0,o.Cn)(),e),l={class:"main_nav_t_div"},n={class:"main_t_nav"},r={class:"main_t_nav_list"},c=a((()=>(0,o._)("li",{class:"nav__btn"},[(0,o._)("a",{class:"nav__link",href:"alert"},[(0,o._)("i",{class:"fas fa-bell fa-2x","aria-hidden":"true"})])],-1))),_={class:"main_m_li_list"},d={class:"nav_m_link",href:"workout.html"},h={class:"nav__btn"},u=a((()=>(0,o._)("i",{class:"fas fa-chevron-left fa-2x","aria-hidden":"true"},null,-1))),p=[u];function m(e,s,t,a,u,m){return(0,o.wg)(),(0,o.iD)("div",l,[(0,o._)("nav",n,[(0,o._)("ul",r,[c,(0,o._)("li",_,[(0,o._)("p",d,(0,i.zw)(t.headerProps),1)]),(0,o._)("li",h,[(0,o._)("a",{class:"nav__link",onClick:s[0]||(s[0]=s=>e.$router.go(-1))},p)])])])])}var g={props:{headerProps:String}},v=t(89);const w=(0,v.Z)(g,[["render",m],["__scopeId","data-v-0063bdd0"]]);var f=w},8156:function(e,s,t){t.r(s),t.d(s,{default:function(){return ne}});var o=t(3396),i=t(9242),a=t(7139);const l=e=>((0,o.dD)("data-v-6e857128"),e=e(),(0,o.Cn)(),e),n={class:"search-contain"},r={class:"inner"},c={class:"div_search"},_={class:"recentSearchBox"},d=l((()=>(0,o._)("h2",{class:"profileh2"},"최근 검색어",-1))),h={class:"main_div-1"},u={class:"btn_file"},p={for:"inputImage",class:""},m=["onClick"],g={class:"popularityBox"},v=l((()=>(0,o._)("h2",{class:"profileh2"},"인기 검색어",-1))),w={class:"main_div-2"},f={class:"aside_area aside_popular"},k=l((()=>(0,o._)("h3",{class:"h_popular"},[(0,o._)("span")],-1))),y={class:"tbl_home"},b={class:"up"},$={class:"upRow",scope:"row"},C=["onClick"],O={class:"white_div"},D={class:"goods_pay_section"},T={class:"goods_group"},E={ref:"items",class:"goods_group_list"},K=["onClick"],I={class:"goods_thumb"},S=["src"],L={class:"goods_info"},P={class:"goods"},U={class:"name"},A={class:"info"},H=l((()=>(0,o._)("span",{class:"blind"},"상품금액",-1))),N={class:"state _statusName value_color_green _click(nmp.front.order.timeline.home.list.openDeliveryPopup(/o/orderStatus/deliveryTracking/2022020394386781/ORDER_DELIVERY/api)) _stopDefault"},R={class:"guide"},z={class:"seller_item"},x={class:"inner"},Y={class:"seller"},B={class:"tel"},M={class:"date"},W=l((()=>(0,o._)("span",{class:"blind"},"등록일",-1))),Z=l((()=>(0,o._)("br",null,null,-1))),F=l((()=>(0,o._)("br",null,null,-1)));function G(e,s,t,l,G,J){const V=(0,o.up)("Header"),j=(0,o.up)("bottom-nav");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o._)("div",n,[(0,o._)("div",r,[(0,o.Wm)(V,{headerProps:G.headerProps},null,8,["headerProps"]),(0,o._)("div",c,[(0,o.wy)((0,o._)("input",{class:"input_search",type:"text",placeholder:"검색어 입력",onKeyup:s[0]||(s[0]=(0,i.D2)((e=>J.searchAuction(G.keyword)),["enter"])),"onUpdate:modelValue":s[1]||(s[1]=e=>G.keyword=e)},null,544),[[i.nr,G.keyword]]),(0,o._)("button",{class:"button_search",onClick:s[2]||(s[2]=e=>J.searchAuction(G.keyword))},"검색")]),(0,o._)("fieldset",_,[d,(0,o._)("div",h,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(this.$store.state.keywordList,((e,s)=>((0,o.wg)(),(0,o.iD)("div",{key:s},[(0,o._)("span",u,[(0,o._)("label",p,[(0,o._)("b",{id:"btnChangeProfile",class:"popularityList",onClick:s=>J.searchAuction(e)},[(0,o._)("em",null,(0,a.zw)(s+1)+".",1),(0,o.Uk)(" "+(0,a.zw)(e),1)],8,m)])])])))),128))])]),(0,o._)("fieldset",g,[v,(0,o._)("div",w,[(0,o._)("div",f,[k,(0,o._)("table",y,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(this.$store.state.popularKeywordList,((e,s)=>((0,o.wg)(),(0,o.iD)("tbody",{key:s},[(0,o._)("tr",b,[(0,o._)("th",$,[(0,o._)("em",null,(0,a.zw)(s+1)+".",1),(0,o._)("span",{onClick:s=>J.searchAuction(e)},(0,a.zw)(e),9,C)])])])))),128))])])])]),(0,o._)("fieldset",null,[(0,o._)("div",O,[(0,o._)("div",D,[(0,o._)("div",T,[(0,o._)("ul",E,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(this.$store.state.searchAuctionList,((e,s)=>((0,o.wg)(),(0,o.iD)("li",{key:e.auction_Id,id:"_rowLi20220203162708CHK2022020394386781",class:"goods_pay_item _interlockNo20220211200904406814"},[(0,o._)("div",{onClick:t=>J.navigateProduct(e.auction_Id,s),class:"goods_item"},[(0,o._)("p",I,[(0,o._)("img",{src:`/product_images/${e.productDTO.product_img_name}.png`,alt:"",width:"90",height:"90"},null,8,S)]),(0,o._)("div",L,[(0,o._)("div",P,[(0,o._)("p",U,(0,a.zw)(e.auction_name),1),(0,o._)("ul",A,[(0,o._)("li",null,[H,(0,o.Uk)((0,a.zw)(e.bid_price)+"원",1)])])]),(0,o._)("p",N,(0,a.zw)(e.bid_status)+" ("+(0,a.zw)(e.deadline_date)+" 경매 종료)",1),(0,o._)("p",R,(0,a.zw)(e.productDTO.p_explanation),1)])],8,K),(0,o._)("div",z,[(0,o._)("div",x,[(0,o._)("span",Y,(0,a.zw)(e.f_farm_name),1),(0,o._)("span",B,"0"+(0,a.zw)(e.f_phonenum.toString().replace(/[^0-9]/g,"").replace(/(^02|^0505|^1[0-9]{1}|^0[0-9]{4})([0-9]+)?([0-9]{4})$/,"$1-$2-$3").replace("--","-")),1),(0,o._)("li",M,[W,(0,o.Uk)(" "+(0,a.zw)(e.productDTO.p_reg_date),1)]),Z,F])])])))),128))],512)])])])])])]),(0,o.Wm)(j,{class:"bottom"})],64)}var J=t(6265),V=t.n(J),j=t(3266),q=t.n(j),Q=t(4029),X=t.n(Q),ee=t(7929),se=t(3454),te=t(4806),oe=t.n(te),ie={components:{Header:ee.Z,bottomNav:se["default"]},name:"search",data(){return{headerProps:"Search",checkUser:"consumer",id:1,preKeyword:"",keyword:"",startLimit:0,NUMBER_OF_AUCTION:5,user:JSON.parse(localStorage.getItem("user")),isMaxLimit:!1}},created(){this.connect(),this.initPopularKeyword()},mounted(){window.addEventListener("scroll",oe().throttle((()=>{this.infiniteScroll(),this.height=document.documentElement.scrollHeight}),500),!0)},methods:{infiniteScroll(){if(""!==this.keyword&&(console.log(this.$refs.items.scrollTop+innerHeight),console.log(this.$refs.items.scrollHeight),console.log(this.$route.path),"/search"===this.$route.path)){const{innerHeight:e}=window;Math.round(this.$refs.items.scrollTop+e)>=this.$refs.items.scrollHeight&&(console.log("스크롤 실행"),this.searchAuction(this.preKeyword)),console.log(e)}},searchAuction(e){""!==e?(console.log("keyword: "+e),this.preKeyword!=e&&(this.$store.commit("RESET_SEARCH_AUCTION_LIST"),this.startLimit=0),this.preKeyword=e,this.$store.commit("PUSH_KEYWORD_LIST",e),V().get(`/api/searchAuction/${this.checkUser}/${this.id}/${e}/${this.startLimit}`,{headers:{TOKEN:this.user.token}}).then((e=>{if("token"!=e.headers.token&&(this.$store.commit("LOGOUT"),this.$router.push("/login")),console.log(e.data),e.data.length)for(let s of e.data)this.$store.commit("PUSH_SEARCH_AUCTION",s);this.startLimit+=this.NUMBER_OF_AUCTION})).catch((e=>{console.log(e)})),this.keyword=""):""===e&&""===this.preKeyword&&alert("검색어를 입력해주세요!")},connect(){const e="/socket";let s=new(X())(e);this.stompClient=q().over(s);let t={TOKEN:this.$store.state.config.headers.TOKEN};this.stompClient.connect(t,(e=>{this.connected=!0,console.log("소켓 연결 성공",e),this.stompClient.subscribe("/send_bidding",(e=>{const s=JSON.parse(e.body);void 0!=s.auction_Id&&this.$store.commit("UPDATE_SEARCH_BID_PRICE",s)}))}),(e=>{console.log("소켓 연결 실패",e),this.connected=!1}))},initPopularKeyword(){V().get("/api/popularKeyword",{headers:{TOKEN:this.user.token}}).then((e=>{"token"!=e.headers.token&&(this.$store.commit("LOGOUT"),this.$router.push("/login")),this.$store.commit("INIT_POPULAR_KEYWORD_LIST",e.data)})).catch((e=>{console.log(e)}))},navigateProduct(e,s){this.$router.push({name:"auction_detail",params:{id:e,index:s}})}}},ae=t(89);const le=(0,ae.Z)(ie,[["render",G],["__scopeId","data-v-6e857128"]]);var ne=le}}]);
//# sourceMappingURL=156.f1608597.js.map