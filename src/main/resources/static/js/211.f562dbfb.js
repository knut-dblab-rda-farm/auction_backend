"use strict";(self["webpackChunkrealvue"]=self["webpackChunkrealvue"]||[]).push([[211],{5140:function(t,e,a){a.d(e,{Z:function(){return k}});var i=a(3396),s=a(7139),n=a(3289);const o=t=>((0,i.dD)("data-v-356d296a"),t=t(),(0,i.Cn)(),t),r={class:"header"},c={class:"navLi"},l=(0,i.Uk)("mdi-home"),u={class:"navLi"},g={class:"navLi"},d=o((()=>(0,i._)("i",{class:"fas fa-chevron-left fa-2x","aria-hidden":"true"},null,-1))),h=[d];function _(t,e,a,o,d,_){const m=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("header",r,[(0,i._)("nav",null,[(0,i._)("li",c,[(0,i.Wm)(m,{to:"/"},{default:(0,i.w5)((()=>[(0,i.Wm)(n.t,null,{default:(0,i.w5)((()=>[l])),_:1})])),_:1})]),(0,i._)("li",u,(0,s.zw)(a.headerProps),1),(0,i._)("li",g,[(0,i._)("p",{class:"nav__link",onClick:e[0]||(e[0]=t=>_.goBack())},h)])])])}var m={props:{headerProps:String},methods:{goBack(){this.$router.go(-1)}}},p=a(89);const w=(0,p.Z)(m,[["render",_],["__scopeId","data-v-356d296a"]]);var k=w},4211:function(t,e,a){a.r(e),a.d(e,{default:function(){return I}});var i=a(3396),s=a(7139);const n={class:"contain",ref:"items"},o=["src","onClick"],r={class:"content"},c=["onClick"],l={class:"name"},u={class:"auction"},g={class:"final-bid"},d={class:"current-auction"},h={class:"auctionBtns"},_={key:0,class:"auctionBtn-ing"},m={key:1,class:"auctionBtn"},p=["onClick"],w={key:3,class:"reviewBtn-end"},k=["onClick"];function D(t,e,a,D,v,f){const S=(0,i.up)("Header"),y=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i.Wm)(S,{headerProps:v.headerProps},null,8,["headerProps"]),(0,i._)("div",n,[(0,i._)("p",{style:(0,s.j5)([0===v.getData.length?{display:"block"}:{display:"none"}]),class:"not-auction-title"},"경매 내역이 없습니다.",4),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(v.getData.length,((t,e)=>((0,i.wg)(),(0,i.iD)("div",{class:"item",key:e},[(0,i._)("img",{src:`/product_images/${v.getData[e].product_img_name}.png`,alt:"",width:"90",height:"90",onClick:t=>f.navigateAuction(v.getData[e].auction_Id)},null,8,o),(0,i._)("div",r,[(0,i._)("div",{onClick:t=>f.navigateAuction(v.getData[e].auction_Id)},[(0,i._)("p",l,(0,s.zw)(v.getData[e].auction_name)+"("+(0,s.zw)(v.getData[e].p_status)+")",1),(0,i._)("div",u,[(0,i._)("p",g,"현재경매 : "+(0,s.zw)(v.getData[e].bid_price.toLocaleString())+"원",1),(0,i._)("p",d,"최종낙찰: "+(0,s.zw)(v.getData[e].a_max_price.toLocaleString())+"원",1)])],8,c),(0,i._)("div",h,[!0===v.getData[e].bid_status?((0,i.wg)(),(0,i.iD)("button",_,"경매중")):(0,i.kq)("",!0),!1===v.getData[e].bid_status?((0,i.wg)(),(0,i.iD)("button",m,"경매종료")):(0,i.kq)("",!0),!1===v.getData[e].bid_status&&"consumer"===v.checkUser?((0,i.wg)(),(0,i.iD)("button",{key:2,class:"auctionBtn",onClick:t=>f.navigateAuctionPayment(v.getData[e])},"계산하기",8,p)):(0,i.kq)("",!0),0===v.writeUrlState[e]?((0,i.wg)(),(0,i.iD)("button",w,"작성완료")):(0,i.kq)("",!0),!1===v.getData[e].bid_status?((0,i.wg)(),(0,i.j4)(y,{key:4,to:`/farm_mypage_auction/writeReview/${v.getData[e].auction_Id}`},{default:(0,i.w5)((()=>[1===v.writeUrlState[e]&&"consumer"===v.checkUser?((0,i.wg)(),(0,i.iD)("button",{key:0,onClick:t=>f.setReviewData(e),class:"reviewBtn"},"후기작성",8,k)):(0,i.kq)("",!0)])),_:2},1032,["to"])):(0,i.kq)("",!0)])])])))),128))],512)])}var v=a(6265),f=a.n(v),S=a(5140),y=a(4806),$=a.n(y),b={components:{Header:S.Z},data(){return{headerProps:"경매 내역",reviewState:1,getData:[],auctionState:!0,user:JSON.parse(localStorage.getItem("user")),checkUser:localStorage.getItem("checkUser"),writeUrlState:[],startLimit:0}},async mounted(){window.addEventListener("scroll",$().throttle((()=>{this.infiniteScroll()}),500),!0),console.log(this.$store.state.user.checkUser),console.log(this.$store.state.user.id),await this.getDatas()},methods:{getDatas(){f().get(`/api/mypageAuctionDetails/${localStorage.getItem("checkUser")}/${localStorage.getItem("id")}/${this.startLimit}`,{headers:{TOKEN:this.user.token}}).then((t=>{console.log(t.data),this.getData.push(t.data),this.getData=this.getData.flat();for(let e=0;e<this.getData.length;e++)console.log(this.getData[e].consumer_review),this.getData[e].consumer_review?this.writeUrlState.push(0):this.writeUrlState.push(1);this.startLimit+=5,console.log(this.writeUrlState)})).catch((t=>{console.log(t)}))},infiniteScroll(){if("/farm_mypage_auction"===this.$route.path){{const{innerHeight:t}=window;Math.round(this.$refs.items.scrollTop+window.innerHeight)>=this.$refs.items.scrollHeight&&(console.log("스크롤 실행"),this.getDatas())}console.log(innerHeight)}},setReviewData(t){console.log(this.getData[t]),this.$store.commit("GET_REVIEW_DATA",this.getData[t])},navigateAuction(t){f().get(`/api/auctionInfo/${t}`,{headers:{TOKEN:this.user.token}}).then((e=>{console.log(e.data),this.$router.push({name:"auction_detail",params:{id:t,auction:JSON.stringify(e.data)}})})).catch((t=>{console.log(t)}))},navigateAuctionPayment(t){this.$router.push({name:"farm_calculate",params:{id:t.auction_Id,auction:JSON.stringify(t)}})}}},U=a(89);const C=(0,U.Z)(b,[["render",D],["__scopeId","data-v-98e4e98c"]]);var I=C}}]);
//# sourceMappingURL=211.f562dbfb.js.map