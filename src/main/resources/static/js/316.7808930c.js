"use strict";(self["webpackChunkrealvue"]=self["webpackChunkrealvue"]||[]).push([[316],{7929:function(e,t,a){a.d(t,{Z:function(){return k}});var n=a(3396),i=a(7139);const r=e=>((0,n.dD)("data-v-0063bdd0"),e=e(),(0,n.Cn)(),e),l={class:"main_nav_t_div"},o={class:"main_t_nav"},s={class:"main_t_nav_list"},c=r((()=>(0,n._)("li",{class:"nav__btn"},[(0,n._)("a",{class:"nav__link",href:"alert"},[(0,n._)("i",{class:"fas fa-bell fa-2x","aria-hidden":"true"})])],-1))),u={class:"main_m_li_list"},d={class:"nav_m_link",href:"workout.html"},m={class:"nav__btn"},g=r((()=>(0,n._)("i",{class:"fas fa-chevron-left fa-2x","aria-hidden":"true"},null,-1))),v=[g];function _(e,t,a,r,g,_){return(0,n.wg)(),(0,n.iD)("div",l,[(0,n._)("nav",o,[(0,n._)("ul",s,[c,(0,n._)("li",u,[(0,n._)("p",d,(0,i.zw)(a.headerProps),1)]),(0,n._)("li",m,[(0,n._)("a",{class:"nav__link",onClick:t[0]||(t[0]=t=>e.$router.go(-1))},v)])])])])}var p={props:{headerProps:String}},w=a(89);const h=(0,w.Z)(p,[["render",_],["__scopeId","data-v-0063bdd0"]]);var k=h},177:function(e,t,a){a.d(t,{Z:function(){return h}});var n=a(3396),i=a(9374),r=a(1138),l=a(7041),o=a(1477),s=a(2370),c=a(3712),u=a(4870),d=a(1107),m=a(131);const g=(0,d.a)({name:"VProgressCircular",props:{bgColor:String,color:String,indeterminate:[Boolean,String],modelValue:{type:[Number,String],default:0},rotate:{type:[Number,String],default:0},width:{type:[Number,String],default:4},...(0,i.Z)(),...(0,r.Q)({tag:"div"}),...(0,l.x$)()},setup(e,t){let{slots:a}=t;const r=20,d=2*Math.PI*r,g=(0,u.iH)(),{themeClasses:v}=(0,l.ER)(e),{sizeClasses:_,sizeStyles:p}=(0,i.t)(e),{textColorClasses:w,textColorStyles:h}=(0,s.rY)((0,u.Vh)(e,"color")),{textColorClasses:k,textColorStyles:f}=(0,s.rY)((0,u.Vh)(e,"bgColor")),{intersectionRef:D,isIntersecting:S}=(0,o.S)(),{resizeRef:b,contentRect:C}=(0,c.y)(),I=(0,n.Fl)((()=>Math.max(0,Math.min(100,parseFloat(e.modelValue))))),y=(0,n.Fl)((()=>Number(e.width))),N=(0,n.Fl)((()=>p.value?Number(e.size):C.value?C.value.width:Math.max(y.value,32))),$=(0,n.Fl)((()=>r/(1-y.value/N.value)*2)),R=(0,n.Fl)((()=>y.value/N.value*$.value)),x=(0,n.Fl)((()=>(0,m.kb)((100-I.value)/100*d)));return(0,n.m0)((()=>{D.value=g.value,b.value=g.value})),()=>(0,n.Wm)(e.tag,{ref:g,class:["v-progress-circular",{"v-progress-circular--indeterminate":!!e.indeterminate,"v-progress-circular--visible":S.value,"v-progress-circular--disable-shrink":"disable-shrink"===e.indeterminate},v.value,_.value,w.value],style:[p.value,h.value],role:"progressbar","aria-valuemin":"0","aria-valuemax":"100","aria-valuenow":e.indeterminate?void 0:I.value},{default:()=>[(0,n.Wm)("svg",{style:{transform:`rotate(calc(-90deg + ${Number(e.rotate)}deg))`},xmlns:"http://www.w3.org/2000/svg",viewBox:`0 0 ${$.value} ${$.value}`},[(0,n.Wm)("circle",{class:["v-progress-circular__underlay",k.value],style:f.value,fill:"transparent",cx:"50%",cy:"50%",r:r,"stroke-width":R.value,"stroke-dasharray":d,"stroke-dashoffset":0},null),(0,n.Wm)("circle",{class:"v-progress-circular__overlay",fill:"transparent",cx:"50%",cy:"50%",r:r,"stroke-width":R.value,"stroke-dasharray":d,"stroke-dashoffset":x.value},null)]),a.default&&(0,n.Wm)("div",{class:"v-progress-circular__content"},[a.default({value:I.value})])]})}});function v(e,t){return(0,n.wg)(),(0,n.j4)(g,{class:"spinner",indeterminate:"",color:"orange"})}var _=a(89);const p={},w=(0,_.Z)(p,[["render",v],["__scopeId","data-v-2c2c7d18"]]);var h=w},316:function(e,t,a){a.r(t),a.d(t,{default:function(){return pe}});var n=a(3396),i=a(3289);const r=e=>((0,n.dD)("data-v-f6ddf150"),e=e(),(0,n.Cn)(),e),l={class:"reviewContain"},o={class:"header"},s=(0,n.Uk)("mdi-arrow-left"),c=r((()=>(0,n._)("p",{class:"headerTitle"},"이용후기",-1))),u=r((()=>(0,n._)("span",null,null,-1))),d={class:"inner"};function m(e,t,a,r,m,g){const v=(0,n.up)("Spinner"),_=(0,n.up)("ReviewList"),p=(0,n.up)("Bottom");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n._)("div",l,[(0,n._)("header",o,[(0,n.Wm)(i.t,{class:"backIcon",onClick:t[0]||(t[0]=t=>e.$router.go(-1)),dark:"",left:""},{default:(0,n.w5)((()=>[s])),_:1}),c,u]),(0,n._)("div",d,[!0===m.spinnerState?((0,n.wg)(),(0,n.j4)(v,{key:0})):(0,n.kq)("",!0),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(m.infiniteScrollValue,((e,t)=>((0,n.wg)(),(0,n.j4)(_,{key:t,class:"reviewList",getData:m.getData,reviewZeroState:m.reviewZeroState},null,8,["getData","reviewZeroState"])))),128))])]),(0,n.Wm)(p)],64)}var g=a(177),v=a(6265),_=a.n(v),p=a(7139);const w={class:"reviewListContain"},h={class:"reviews"},k={key:0,class:"zero-review-text"},f=["onClick","src"],D=["onClick"],S={class:"reviewTitle"},b={class:"reviewTitle"},C={class:"stars"},I={class:"rightInfo"},y={class:"button-contain"},N=["onClick"],$=["onClick"];function R(e,t,a,i,r,l){const o=(0,n.up)("ReviewDetail"),s=(0,n.up)("infinite-loading");return(0,n.wg)(),(0,n.iD)("div",w,[1===r.reviewModalState?((0,n.wg)(),(0,n.j4)(o,{key:0,onCloseModal:t[0]||(t[0]=e=>r.reviewModalState=0),clickedData:a.getData[0][r.clickedData],reviewModalState:r.reviewModalState},null,8,["clickedData","reviewModalState"])):(0,n.kq)("",!0),(0,n.Wm)(s,{onInfinite:e.infineteHandler},null,8,["onInfinite"]),(0,n._)("div",h,[1===a.reviewZeroState?((0,n.wg)(),(0,n.iD)("h2",k,"리뷰가 없습니다.")):(0,n.kq)("",!0),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(a.getData.flat(1/0).length,((t,i)=>((0,n.wg)(),(0,n.iD)("div",{class:"review",key:i},[(0,n._)("img",{onClick:e=>(r.reviewModalState=1,r.clickedData=i),src:a.getData[0][i].review_img_name?`/auciton_review_images/${a.getData[0][i].review_img_name}.png`:"/member_profile_images/base_image.png",alt:"상품 이미지",width:"50",height:"50"},null,8,f),(0,n._)("div",{class:"reviewContent",onClick:e=>(r.reviewModalState=1,r.clickedData=i)},[(0,n._)("p",S,(0,p.zw)(0===r.userState?a.getData[0][i].f_name:a.getData[0][i].c_name),1),(0,n._)("p",b,(0,p.zw)(a.getData[0][i].auction_name),1),(0,n._)("div",C,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(a.getData[0][i].grade_point,((e,t)=>((0,n.wg)(),(0,n.iD)("i",{key:t,class:"fa fa-star reviewStar"})))),128))])],8,D),(0,n._)("div",I,[(0,n._)("div",y,[0===r.userState&&a.getData[0][i].consumer_review?((0,n.wg)(),(0,n.iD)("button",{key:0,onClick:t=>(e.$store.commit("GET_REVIEW_DATA",a.getData[0][i]),e.$router.push(`/farm_mypage_auction/writeReview/edit/${a.getData[0][i].auction_Id}`)),class:"write-button"}," 수정하기 ",8,N)):(0,n.kq)("",!0),0===r.userState&&a.getData[0][i].consumer_review?((0,n.wg)(),(0,n.iD)("button",{key:1,onClick:e=>l.deleteReview(a.getData[0][i].auction_Id,a.getData[0][i].consumer_id,a.getData[0][i].review_img_name),class:"delete-button"}," 삭제하기 ",8,$)):(0,n.kq)("",!0)])])])))),128))])])}const x=e=>((0,n.dD)("data-v-27a4be58"),e=e(),(0,n.Cn)(),e),M={class:"reviewModalDetail"},Z=x((()=>(0,n._)("div",{class:"back"},null,-1))),O={class:"inner"},q=["src"],z={class:"reviewContent"},U=x((()=>(0,n._)("hr",null,null,-1)));function H(e,t,a,i,r,l){const o=(0,n.up)("Comment");return(0,n.wg)(),(0,n.iD)("div",M,[Z,(0,n._)("div",O,[(0,n._)("header",null,[(0,n._)("p",{class:"close",onClick:t[0]||(t[0]=t=>e.$emit("closeModal","모달 닫기"))},"X"),(0,n._)("h2",{class:"title",onClick:t[1]||(t[1]=e=>l.navigateAuction(a.clickedData.auction_Id))},(0,p.zw)(a.clickedData.auction_name),1)]),(0,n._)("img",{class:"reviewImg",src:`/auciton_review_images/${a.clickedData.review_img_name}.png`,alt:"auction 이미지",width:"200",height:"200"},null,8,q),(0,n._)("p",z,(0,p.zw)(a.clickedData.consumer_review),1),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(a.clickedData.grade_point,(e=>((0,n.wg)(),(0,n.iD)("i",{key:e,class:"fa fa-star review-star"})))),128)),(0,n.Wm)(o,{auction_id:a.clickedData.auction_Id,clickedData:a.clickedData},null,8,["auction_id","clickedData"])]),U])}var T=a(9242);const E=e=>((0,n.dD)("data-v-32a50d70"),e=e(),(0,n.Cn)(),e),V={class:"commentContain"},W={class:"inner"},K={class:"commentList"},A=E((()=>(0,n._)("hr",null,null,-1))),F=E((()=>(0,n._)("br",null,null,-1))),J={key:0,class:"comment"},P={class:"userName"},Y={class:"userComment"},B={key:0,class:"control-button"},j={key:1,class:"commentInput"},L={class:"inputHeader"},X=E((()=>(0,n._)("h2",null,"댓글 쓰기",-1))),G=E((()=>(0,n._)("br",null,null,-1))),Q=E((()=>(0,n._)("br",null,null,-1)));function ee(e,t,a,i,r,l){return(0,n.wg)(),(0,n.iD)("div",V,[(0,n._)("div",W,[(0,n._)("div",K,[A,F,0===r.inputState?((0,n.wg)(),(0,n.iD)("div",J,[(0,n._)("h3",P,(0,p.zw)("consumer"===r.checkUser?r.getData.f_farm_name:r.user.f_farm_name),1),(0,n._)("p",Y,(0,p.zw)(a.clickedData.farm_review&&""!==a.clickedData.farm_review?a.clickedData.farm_review:"아직 답글이 없습니다."),1)])):(0,n.kq)("",!0)]),"farm"===r.checkUser?((0,n.wg)(),(0,n.iD)("div",B,[0===r.inputState?((0,n.wg)(),(0,n.iD)("button",{key:0,class:"commentButton",onClick:t[0]||(t[0]=e=>r.inputState=1)},(0,p.zw)(a.clickedData.farm_review?"수정하기":"답글달기"),1)):(0,n.kq)("",!0),0===r.inputState?((0,n.wg)(),(0,n.iD)("button",{key:1,class:"deleteButton",onClick:t[1]||(t[1]=e=>l.commentPush(0))},"삭제하기")):(0,n.kq)("",!0)])):(0,n.kq)("",!0),1===r.inputState?((0,n.wg)(),(0,n.iD)("div",j,[(0,n._)("div",L,[X,(0,n._)("p",{class:"close",onClick:t[2]||(t[2]=e=>r.inputState=0)},"X")]),(0,n.wy)((0,n._)("textarea",{type:"text","onUpdate:modelValue":t[3]||(t[3]=e=>r.reqData.comment=e),placeholder:"댓글을 입력해주세요!"},null,512),[[T.nr,r.reqData.comment]]),G,(0,n._)("button",{onClick:t[4]||(t[4]=e=>l.commentPush(1)),class:"comment-button"},"확인")])):(0,n.kq)("",!0)]),Q])}var te={props:{auction_id:Number,clickedData:Object},data(){return{reqData:{comment:""},checkUser:localStorage.getItem("checkUser"),userState:0,inputState:0,user:JSON.parse(localStorage.getItem("user")),getData:{}}},mounted(){console.log(this.clickedData),"farm"===localStorage.getItem("checkUser")?this.userState=1:this.userState=0,console.log(JSON.parse(localStorage.getItem("id")));let e=localStorage.getItem("checkUser");console.log(e),_().get(`/api/AuctionReview/${e}/${parseInt(localStorage.getItem("id"))}`,{headers:{TOKEN:this.user.token}}).then((e=>{console.log(e),this.getData=e.data[0],console.log(this.getData)})).catch((e=>console.log(e)))},methods:{commentPush(e){let t=new FormData;if(t.append("checkUser",localStorage.getItem("checkUser")),t.append("auction_Id",this.clickedData.auction_Id),t.append("grade_point",this.getData.grade_point),t.append("consumer_review",this.getData.auction_name),t.append("review_img_name",this.getData.review_img_name),t.append("product_img_name",this.getData.product_img_name),0===e){if(!window.confirm("댓글을 삭제하시겠습니까?"))return;alert("삭제되었습니다!"),t.append("farm_review","")}else t.append("farm_review",this.reqData.comment);t.append("consumer_id",12),t.append("auction_name",this.getData.auction_name),t.append("f_farm_name",JSON.parse(localStorage.getItem("user")).f_farm_name),t.append("c_name",this.getData.c_name);for(let a of t)console.log(a);_().patch("/api/AuctionReview",t,{headers:{TOKEN:this.user.token,"Content-Type":"multipart/form-data"}}).then((e=>{console.log(e),location.reload()})).catch((e=>{console.log(e)}))}}},ae=a(89);const ne=(0,ae.Z)(te,[["render",ee],["__scopeId","data-v-32a50d70"]]);var ie=ne,re={props:{reviewModalState:Number,clickedData:Object},data(){return{user:JSON.parse(localStorage.getItem("user"))}},mounted(){console.log(`/auciton_review_images/${this.clickedData.review_img_name}.png`),console.log(this.clickedData)},components:{Comment:ie},methods:{navigateAuction(e){_().get(`/api/auctionInfo/${e}`,{headers:{TOKEN:this.user.token}}).then((t=>{console.log(t.data),this.$router.push({name:"auction_detail",params:{id:e,auction:JSON.stringify(t.data)}})})).catch((e=>{console.log(e)}))}}};const le=(0,ae.Z)(re,[["render",H],["__scopeId","data-v-27a4be58"]]);var oe=le,se={data(){return{clickedData:0,reviewState:"내가 쓴 리뷰",reviewModalState:0,userState:0,user:JSON.parse(localStorage.getItem("user"))}},props:{getData:Array,reviewZeroState:Number},components:{ReviewDetail:oe},mounted(){console.log(localStorage.getItem("checkUser")),console.log(this.getData.length),"farm"===localStorage.getItem("checkUser")?this.userState=1:this.userState=0},methods:{deleteReview(e,t,a){console.log(e,t,a),console.log(this.user.token),window.confirm("리뷰를 삭제하시겠습니까?")&&(alert("삭제되었습니다!"),_()["delete"](`/api/auctionReview/${e}/${t}/${a}`,{headers:{TOKEN:this.user.token}}).then((()=>{location.reload()})).catch((e=>{console.log(e)})))}}};const ce=(0,ae.Z)(se,[["render",R],["__scopeId","data-v-3db7c3ca"]]);var ue=ce,de=(a(7929),a(3454)),me=a(4806),ge=a.n(me),ve={components:{ReviewList:ue,ReviewDetail:oe,Bottom:de["default"],Spinner:g.Z},data(){return{spinnerState:!0,reviewButton:["내가 쓴 리뷰","내가 받은 리뷰"],reviewState:"내가 쓴 리뷰",infiniteScrollValue:1,getData:[],user:JSON.parse(localStorage.getItem("user")),reviewZeroState:0}},mounted(){this.getReviewData(),window.addEventListener("scroll",ge().throttle((()=>{this.infiniteScroll()}),300))},methods:{getReviewData(){let e=void 0!=this.user.consumer_id?this.user.consumer_id:this.user.farm_id;console.log(e),_().get(`/api/AuctionReview/${localStorage.getItem("checkUser")}/${e}`,{headers:{TOKEN:this.user.token}}).then((e=>{this.getData.push(e.data),this.spinnerState=!1,0===e.data.length&&(this.reviewZeroState=1),console.log(e),console.log(this.getData.flat(1/0))})).catch((e=>{console.log(e)}))},async infiniteScroll(){const{innerHeight:e}=window,{scrollHeight:t}=document.body,{scrollTop:a}=document.documentElement;Math.round(a+e)>=t&&(this.infiniteScrollValue+=1),console.log(e)}}};const _e=(0,ae.Z)(ve,[["render",m],["__scopeId","data-v-f6ddf150"]]);var pe=_e},1477:function(e,t,a){a.d(t,{S:function(){return l}});var n=a(4870),i=a(3396),r=a(2385);function l(e){const t=(0,n.iH)(),a=(0,n.iH)(!1);if(r.cu){const n=new IntersectionObserver((t=>{null==e||e(t,n),a.value=!!t.find((e=>e.isIntersecting))}));(0,i.Jd)((()=>{n.disconnect()})),(0,i.YP)(t,((e,t)=>{t&&(n.unobserve(t),a.value=!1),e&&n.observe(e)}),{flush:"post"})}return{intersectionRef:t,isIntersecting:a}}}}]);
//# sourceMappingURL=316.7808930c.js.map