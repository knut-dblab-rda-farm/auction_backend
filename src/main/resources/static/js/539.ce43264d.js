"use strict";(self["webpackChunkrealvue"]=self["webpackChunkrealvue"]||[]).push([[539,791],{8436:function(t,i,e){e.d(i,{Z:function(){return k}});var s=e(3396),o=e(7139),a=e(3289);const n=t=>((0,s.dD)("data-v-0469b35c"),t=t(),(0,s.Cn)(),t),l={class:"header"},c={class:"navLi"},r=(0,s.Uk)("mdi-home"),u={class:"navLi"},_={class:"navLi"},d=n((()=>(0,s._)("i",{class:"fas fa-chevron-left fa-2x","aria-hidden":"true"},null,-1))),h=[d];function m(t,i,e,n,d,m){const p=(0,s.up)("router-link");return(0,s.wg)(),(0,s.iD)("header",l,[(0,s._)("nav",null,[(0,s._)("li",c,[(0,s.Wm)(p,{to:"/"},{default:(0,s.w5)((()=>[(0,s.Wm)(a.t,null,{default:(0,s.w5)((()=>[r])),_:1})])),_:1})]),(0,s._)("li",u,(0,o.zw)(e.headerProps),1),(0,s._)("li",_,[(0,s._)("p",{class:"nav__link",onClick:i[0]||(i[0]=t=>m.goBack())},h)])])])}var p={props:{headerProps:String},methods:{goBack(){this.$router.go(-1)}}},f=e(89);const g=(0,f.Z)(p,[["render",m],["__scopeId","data-v-0469b35c"]]);var k=g},6719:function(t,i,e){e.d(i,{Z:function(){return _}});var s=e(3396),o=e(7139);function a(t,i,e,a,n,l){return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("i",{onClick:i[0]||(i[0]=t=>l.likeClick()),class:"fa fa-heart like-icon",style:(0,o.j5)([1===n.like.state?{color:"#FFC1AA"}:{color:"lightgrey"}])},null,4)])}var n=e(6265),l=e.n(n),c={data(){return{like:{users:[],count:0,state:0,auction_id:0,consumer_id:0}}},async mounted(){this.like.auction_id=parseInt(this.$route.params.id),this.like.consumer_id=this.$store.state.login.userInfo.consumer_id,await l().get(`/api/checkWish/${this.like.auction_id}/${this.like.consumer_id}`).then((t=>{console.log(t.data),this.like.state=t.data})).catch((t=>{alert(t)}))},methods:{likeClick(){let t={auction_id:this.like.auction_id,consumer_id:this.like.consumer_id};0===this.like.state?l().post("/api/registWish",t).then((()=>{alert("좋아요를 클릭했습니다!")})).catch((t=>{console.log(t)})):1===this.like.state&&l()["delete"](`/api/deleteWish/${this.like.auction_id}/${this.like.consumer_id}`).then((()=>{alert("좋아요를 취소하였습니다!")})).catch((t=>console.log(t)))}}},r=e(89);const u=(0,r.Z)(c,[["render",a],["__scopeId","data-v-894e6602"]]);var _=u},8637:function(t,i,e){e.r(i),e.d(i,{default:function(){return lt}});var s=e(3396),o=e(7139),a=e(4678),n=e(1991);const l=t=>((0,s.dD)("data-v-74422fee"),t=t(),(0,s.Cn)(),t),c=l((()=>(0,s._)("h2",{class:"profileh2"},"상세 정보",-1))),r={class:"profileh2"},u={class:"aside_area aside_popular"},_=l((()=>(0,s._)("h3",{class:"h_popular"},null,-1))),d={class:"tbl_home"},h={class:""},m={class:""},p=l((()=>(0,s._)("th",null,"시작가",-1))),f={class:""},g=l((()=>(0,s._)("th",null,"최대 입찰가",-1))),k={class:""},b=l((()=>(0,s._)("th",null,"현재가",-1))),v={class:""},w=l((()=>(0,s._)("th",null,"낙과 일자",-1))),I={class:""},C=l((()=>(0,s._)("th",null,"사이즈",-1))),$={class:""},D=l((()=>(0,s._)("th",null,"상태",-1))),S=(0,s.Uk)("삭제하기"),z=(0,s.Uk)(" 수정하기 "),T={class:"stateBtn"},O=(0,s.Uk)("입찰하기"),x={class:"h3_middle"},y=l((()=>(0,s._)("h2",{class:"profileh2"},"생산자 정보",-1))),P={class:"goods_group_list"},W={id:"_rowLi20220213173042CHK2022021381488661",class:"goods_pay_item"},A={class:"goods_item"},N={class:"goods_thumb"},Z=["src"],L={class:"goods_info"},U={class:"guide2"},q={class:"guide2"},J={class:"guide2"},j={class:"guide2"},B={class:"guide2"},E={class:"seller_item"},F={class:"inner"},M={class:"seller"},H={class:"tel"},K=l((()=>(0,s._)("p",{class:"state_button qna _click(nmp.front.order.timeline.home.list.shoppingInquiry(/merchant/shoppingInquiry/2022021381488661)) _stopDefault"}," 문의하기 ",-1))),V={action:"farm_intro",class:"login-form"},R=l((()=>(0,s._)("input",{class:"login-form__btn",type:"submit",value:"농가 상세 소개"},null,-1)));function G(t,i,e,l,G,Q){const X=(0,s.up)("Header"),Y=(0,s.up)("Slide"),tt=(0,s.up)("Like"),it=(0,s.up)("router-link");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s.Wm)(X,{headerProps:t.headerProps},null,8,["headerProps"]),(0,s.Wm)(Y,{imgData:t.imgData},null,8,["imgData"]),(0,s._)("fieldset",null,[c,(0,s._)("h2",r,(0,o.zw)(t.auction.auction_name),1),(0,s._)("div",u,[_,(0,s._)("table",d,[(0,s._)("tbody",null,[(0,s._)("tr",h,[(0,s._)("th",null,(0,o.zw)(t.auction.productDTO.product),1),(0,s._)("td",null,(0,o.zw)(t.auction.productDTO.product_kg)+"kg",1)]),(0,s._)("tr",m,[p,(0,s._)("td",null,(0,o.zw)(t.auction.a_starting_price)+"원",1)]),(0,s._)("tr",f,[g,(0,s._)("td",null,(0,o.zw)(t.auction.a_max_price)+"원",1)]),(0,s._)("tr",k,[b,(0,s._)("td",null,(0,o.zw)(t.auction.bid_price)+"원",1)]),(0,s._)("tr",v,[w,(0,s._)("td",null,(0,o.zw)(t.auction.productDTO.p_drop_date),1)]),(0,s._)("tr",I,[C,(0,s._)("td",null,(0,o.zw)(t.auction.productDTO.size),1)]),(0,s._)("tr",$,[D,(0,s._)("td",null,(0,o.zw)(t.auction.productDTO.p_status),1)])])])]),(0,s._)("div",null,[!0===t.userState?((0,s.wg)(),(0,s.j4)(a.T,{key:0,class:"delete-button",block:"",onClick:i[0]||(i[0]=t=>Q.bid())},{default:(0,s.w5)((()=>[S])),_:1})):(0,s.kq)("",!0),!0===t.userState?((0,s.wg)(),(0,s.j4)(a.T,{key:1,class:"delete-button",block:"",onClick:i[1]||(i[1]=i=>t.$router.push(`/auction_reg/${t.auction}`))},{default:(0,s.w5)((()=>[z])),_:1})):(0,s.kq)("",!0),(0,s.Wm)(n.h,{type:"number",id:"bid_price",modelValue:t.bid_price,"onUpdate:modelValue":i[2]||(i[2]=i=>t.bid_price=i)},null,8,["modelValue"]),(0,s._)("div",T,[((0,s.wg)(),(0,s.j4)(tt,{class:"like-button",key:t.likeState,onClick:i[3]||(i[3]=t=>Q.likeStateFunc())})),(0,s.Wm)(a.T,{class:"bid-button",block:"",onClick:i[4]||(i[4]=t=>Q.bid())},{default:(0,s.w5)((()=>[O])),_:1})])])]),(0,s._)("h3",x,(0,o.zw)(t.auction.productDTO.p_explanation),1),y,(0,s._)("div",{class:"goods_group",onClick:i[5]||(i[5]=i=>t.$router.push("/auction_detail/farm_intro"))},[(0,s._)("ul",P,[(0,s._)("li",W,[(0,s._)("div",A,[(0,s._)("p",N,[(0,s._)("img",{src:`/product_images/${t.farmInformation.productDTO.product_img_name}.png`,alt:"",width:"90",height:"90"},null,8,Z)]),(0,s._)("div",L,[(0,s._)("p",U," 농가명 : "+(0,o.zw)(t.farmInformation.f_farm_name),1),(0,s._)("p",q," 대표자 : "+(0,o.zw)(t.farmInformation.f_name),1),(0,s._)("p",J," 사업자 등록번호 : "+(0,o.zw)(t.farmInformation.f_num),1),(0,s._)("p",j," 농가 주소 : "+(0,o.zw)(t.farmInformation.f_location),1),(0,s._)("p",B," 연락처 : "+(0,o.zw)(t.farmInformation.f_phonenum),1)])]),(0,s._)("div",E,[(0,s._)("div",F,[(0,s._)("span",M,(0,o.zw)(t.farmInformation.f_farm_name),1),(0,s._)("span",H,(0,o.zw)(t.farmInformation.f_phonenum),1),K])])])])]),(0,s._)("form",V,[(0,s.Wm)(it,{to:`/auction_detail/farm_intro/${t.farmInformation.farm_id}`},{default:(0,s.w5)((()=>[R])),_:1},8,["to"])])])}var Q=e(3266),X=e.n(Q),Y=e(4029),tt=e.n(Y),it=e(8436),et=e(6719),st=e(438),ot={name:"App",components:{Header:it.Z,Slide:st["default"],Like:et.Z},data:()=>({headerProps:"경매 상세",auction:null,bid_price:null,consumer_id:null,user:JSON.parse(localStorage.getItem("user")),testConsumerId:12,userState:!1,likeState:0,isMaxPrice:0,bidAlertText:"입찰하시겠습니까?",imgData:[],farmInformation:{}}),mounted(){this.$store.state.login.userInfo.farm_id===this.auction.farm_id||this.$store.state.login.userInfo.farm_id?this.userState=!0:this.userState=!1},created(){this.connect(),this.farmInformation=JSON.parse(this.$route.params.auction),console.log("생산자 정보",this.farmInformation),this.auction=JSON.parse(this.$route.params.auction),this.imgData.push(this.auction.productDTO.product_img_name),console.log("pushImg",this.imgData)},methods:{likeStateFunc(){0===this.likeState?this.likeState=1:this.likeState=0},bid(){console.log("datas",this.auction.consumer_id),console.log("user",this.$store.state.login.userInfo.consumer_id),console.log(this.bid_price,this.auction.a_max_price),console.log("auction.auction_Id:"+this.auction.auction_Id),console.log("auction.a_starting_price: "+this.auction.a_starting_price),console.log("bid_price:"+this.bid_price),console.log("auction.bid_price: "+this.auction.bid_price),console.log("this.user.consumer_id: "+this.user.consumer_id),console.log(this.stompClient),console.log(this.stompClient.connected),this.auction.comsumer_id!=this.$store.state.login.userInfo.consumer_id?this.bid_price>this.auction.a_max_price?alert("최대 입찰가를 초과했습니다!"):(this.bid_price==this.auction.a_max_price&&(this.isMaxPrice=1,this.bidAlertText="최고 입찰가로 "+this.bidAlertText),this.bid_price>this.auction.bid_price&&this.stompClient&&this.stompClient.connected?1==confirm(this.bidAlertText)&&(this.stompClient.send("/receive_bidding",JSON.stringify({auction_Id:this.auction.auction_Id,bid_price:this.bid_price,farm_id:this.auction.farm_id,auction_consumer_id:this.auction.consumer_id,consumer_id:this.user.consumer_id,auction_name:this.auction.auction_name,isMaxPrice:this.isMaxPrice}),{}),this.auction.comsumer_id=this.$store.state.login.userInfo.consumer_id):alert("현재 경매가보다 낮습니다!!")):alert("이미 경매에 참여하셨습니다!")},connect(){const t="/socket";let i=new(tt())(t);this.stompClient=X().over(i),console.log(`소켓 연결을 시도합니다. 서버 주소: ${t}`),console.log(this.$store.state.config.headers);let e={TOKEN:this.$store.state.config.headers.TOKEN};console.log(e),this.stompClient.connect(e,(t=>{this.connected=!0,console.log("소켓 연결 성공",t),this.stompClient.subscribe("/send_bidding",(t=>{const i=JSON.parse(t.body);console.log(i),void 0!=i.auction_Id&&(this.$store.commit("UPDATE_BID_PRICE",i),this.auction.bid_price=i.bid_price)}))}),(t=>{console.log("소켓 연결 실패",t),this.connected=!1}))}}},at=e(89);const nt=(0,at.Z)(ot,[["render",G],["__scopeId","data-v-74422fee"]]);var lt=nt}}]);
//# sourceMappingURL=539.ce43264d.js.map