"use strict";(self["webpackChunkrealvue"]=self["webpackChunkrealvue"]||[]).push([[223,673],{4925:function(t,e,s){s.d(e,{Z:function(){return f}});var o=s(3396),i=s(3289);const n=t=>((0,o.dD)("data-v-d769638a"),t=t(),(0,o.Cn)(),t),a={class:"header"},l={class:"navLi"},c=(0,o.Uk)("mdi-home"),r=n((()=>(0,o._)("li",{class:"navLi"},"리뷰 작성",-1))),u={class:"navLi"},d=n((()=>(0,o._)("i",{class:"fas fa-chevron-left fa-2x","aria-hidden":"true"},null,-1))),_=[d];function h(t,e,s,n,d,h){const p=(0,o.up)("router-link");return(0,o.wg)(),(0,o.iD)("header",a,[(0,o._)("nav",null,[(0,o._)("li",l,[(0,o.Wm)(p,{to:"/"},{default:(0,o.w5)((()=>[(0,o.Wm)(i.t,null,{default:(0,o.w5)((()=>[c])),_:1})])),_:1})]),r,(0,o._)("li",u,[(0,o._)("p",{class:"nav__link",onClick:e[0]||(e[0]=t=>h.goBack())},_)])])])}var p={methods:{goBack(){this.$router.go(-1)}}},m=s(89);const g=(0,m.Z)(p,[["render",h],["__scopeId","data-v-d769638a"]]);var f=g},1750:function(t,e,s){s.d(e,{Z:function(){return u}});var o=s(3396);function i(t,e,s,i,n,a){return(0,o.wg)(),(0,o.iD)("div",null,[(0,o._)("i",{onClick:e[0]||(e[0]=t=>a.likeClick()),class:"fa fa-heart like-icon"})])}s(6699);var n=s(6265),a=s.n(n),l={data(){return{like:{users:[],count:0}}},async mounted(){JSON.parse(localStorage.getItem("userInformation"));await a().get("/api/likePostWho",{params:{post_id:this.$route.params.post}}).then((t=>{if(console.log(t.data),"failure"===t.data)this.like.count=0;else{for(let e=0;e<t.data.length;e++)this.like.users.push(t.data[e].nickname),t.data[e].consumer_id===this.$store.state.login.consumer_id&&(document.querySelector(".likeAndShareBtn").style.backgroundColor="lightgrey",document.querySelector(".likeAndShareBtn").style.color="grey");this.like.count=this.like.users.length}})).catch((t=>{console.log(t)}))},methods:{likeWho(){a().get("/api/likePostWho",{params:{post_id:this.$route.params.post}}).then((t=>{for(let e=0;e<t.data.length;e++)this.like.users.push(t.data[e].nickname),t.data[e].consumer_id===this.$store.state.login.user.consumer_id&&(document.querySelector(".likeAndShareBtn").style.backgroundColor="lightgrey",document.querySelector(".likeAndShareBtn").style.color="grey");this.like.users=this.like.users.filter((t=>void 0!==t)),this.like.count=this.like.users.length})).catch((t=>{console.log(t)}))},likeClick(){let t=JSON.parse(localStorage.getItem("userInformation"));this.like.users.includes(this.$store.state.login.user.consumer_id)?a()["delete"]("/api/likesMinus",{params:{post_id:this.$route.params.post,customer_id:this.$store.state.login.user.customer_id}}).then((t=>{console.log(t)})):a().post("/api/likesPlus",{post_id:this.$route.params.post,consumer_id:t.nickname}).then((t=>{console.log(t)}))}}},c=s(89);const r=(0,c.Z)(l,[["render",i],["__scopeId","data-v-6b22bdb4"]]);var u=r},7300:function(t,e,s){s.r(e),s.d(e,{default:function(){return ot}});var o=s(3396),i=s(7139),n=s(4678);const a=t=>((0,o.dD)("data-v-803ef122"),t=t(),(0,o.Cn)(),t),l=a((()=>(0,o._)("h2",{class:"profileh2"},"상세 정보",-1))),c={class:"profileh2"},r={class:"aside_area aside_popular"},u=a((()=>(0,o._)("h3",{class:"h_popular"},null,-1))),d={class:"tbl_home"},_={class:""},h={class:""},p={class:""},m=a((()=>(0,o._)("th",null,"시작 가격",-1))),g={class:""},f=a((()=>(0,o._)("th",null,"현재 가격",-1))),k={class:""},b=a((()=>(0,o._)("th",null,"낙과 일자",-1))),v={class:""},w=a((()=>(0,o._)("th",null,"사이즈",-1))),C={class:""},S=a((()=>(0,o._)("th",null,"상태",-1))),y=(0,o.Uk)("삭제하기"),I={class:"stateBtn"},z=(0,o.Uk)("입찰하기"),$={class:"h3_middle"},D=a((()=>(0,o._)("h2",{class:"profileh2"},"생산자 정보",-1))),O={class:"goods_group_list"},T={id:"_rowLi20220213173042CHK2022021381488661",class:"goods_pay_item"},P={class:"goods_item"},W={class:"goods_thumb"},q=["src"],B={class:"goods_info"},N={class:"guide2"},Z={class:"guide2"},A={class:"guide2"},J={class:"guide2"},L={class:"guide2"},E={class:"seller_item"},U={class:"inner"},H={class:"seller"},K={class:"tel"},x=a((()=>(0,o._)("p",{class:"state_button qna _click(nmp.front.order.timeline.home.list.shoppingInquiry(/merchant/shoppingInquiry/2022021381488661)) _stopDefault"}," 문의하기 ",-1))),j=a((()=>(0,o._)("form",{action:"farm_intro",class:"login-form"},[(0,o._)("input",{class:"login-form__btn",type:"submit",value:"농가 상세 소개"})],-1)));function M(t,e,s,a,M,R){const F=(0,o.up)("Header"),G=(0,o.up)("Slide"),Q=(0,o.up)("Like");return(0,o.wg)(),(0,o.iD)("div",null,[(0,o.Wm)(F,{headerProps:t.headerProps},null,8,["headerProps"]),(0,o.Wm)(G),(0,o._)("fieldset",null,[l,(0,o._)("h2",c,(0,i.zw)(t.auction.auction_name),1),(0,o._)("div",r,[u,(0,o._)("table",d,[(0,o._)("tbody",null,[(0,o._)("tr",_,[(0,o._)("th",null,(0,i.zw)(t.auction.productDTO.product),1),(0,o._)("td",null,(0,i.zw)(t.auction.productDTO.product_kg)+"kg",1)]),(0,o._)("tr",h,[(0,o._)("th",null,"consumer_id : "+(0,i.zw)(t.testConsumerId),1)]),(0,o._)("tr",p,[m,(0,o._)("td",null,(0,i.zw)(t.auction.a_starting_price)+"원",1)]),(0,o._)("tr",g,[f,(0,o._)("td",null,(0,i.zw)(t.auction.bid_price)+"원",1)]),(0,o._)("tr",k,[b,(0,o._)("td",null,(0,i.zw)(t.auction.productDTO.p_drop_date),1)]),(0,o._)("tr",v,[w,(0,o._)("td",null,(0,i.zw)(t.auction.productDTO.size),1)]),(0,o._)("tr",C,[S,(0,o._)("td",null,(0,i.zw)(t.auction.productDTO.p_status),1)])])])]),(0,o._)("div",null,[!0===t.deleteState?((0,o.wg)(),(0,o.j4)(n.T,{key:0,class:"delete-button",block:"",onClick:e[0]||(e[0]=t=>R.bid())},{default:(0,o.w5)((()=>[y])),_:1})):(0,o.kq)("",!0),(0,o._)("div",I,[(0,o.Wm)(Q),(0,o.Wm)(n.T,{block:"",onClick:e[1]||(e[1]=t=>R.bid())},{default:(0,o.w5)((()=>[z])),_:1})])])]),(0,o._)("h3",$,(0,i.zw)(t.auction.productDTO.p_explanation),1),D,(0,o._)("div",{class:"goods_group",onClick:e[2]||(e[2]=e=>t.$router.push("/auction_detail/farm_intro"))},[(0,o._)("ul",O,[(0,o._)("li",T,[(0,o._)("div",P,[(0,o._)("p",W,[(0,o._)("img",{src:`/product_images/${t.auction.productDTO.product_img_name}.png`,alt:"",width:"90",height:"90"},null,8,q)]),(0,o._)("div",B,[(0,o._)("p",N," 농가명 : "+(0,i.zw)(t.auction.f_farm_name),1),(0,o._)("p",Z," 대표자 : "+(0,i.zw)(t.auction.f_name),1),(0,o._)("p",A," 사업자 등록번호 : "+(0,i.zw)(t.auction.f_num),1),(0,o._)("p",J," 농가 주소 : "+(0,i.zw)(t.auction.f_location),1),(0,o._)("p",L," 연락처 : "+(0,i.zw)(t.auction.f_phonenum),1)])]),(0,o._)("div",E,[(0,o._)("div",U,[(0,o._)("span",H,(0,i.zw)(t.auction.f_farm_name),1),(0,o._)("span",K,(0,i.zw)(t.auction.f_phonenum),1),x])])])])]),j])}var R=s(3266),F=s.n(R),G=s(4029),Q=s.n(G),V=s(4925),X=s(1750),Y=s(7866),tt={name:"App",components:{Header:V.Z,Slide:Y["default"],Like:X.Z},data:()=>({headerProps:"경매 상세",auction:null,bid_price:null,consumer_id:null,user:JSON.parse(localStorage.getItem("user")),testConsumerId:12,deleteState:!1}),mounted(){this.$store.state.login.userInfo.consumer_id===this.testConsumerId?this.deleteState=!0:this.deleteState=!1},created(){this.connect(),console.log(this.$route.params.auction),this.auction=JSON.parse(this.$route.params.auction),console.log(this.auction)},methods:{bid(){console.log("auction.auction_Id:"+this.auction.auction_Id),console.log("auction.a_starting_price: "+this.auction.a_starting_price),console.log("bid_price:"+this.bid_price),console.log("auction.bid_price: "+this.auction.bid_price),console.log("this.user.consumer_id: "+this.user.consumer_id),console.log(this.stompClient),console.log(this.stompClient.connected),this.bid_price<this.auction.a_starting_price?alert("시작가격보다 낮습니다!!"):this.bid_price>this.auction.bid_price&&this.stompClient&&this.stompClient.connected?this.stompClient.send("/receive_bidding",JSON.stringify({auction_Id:this.auction.auction_Id,bid_price:this.bid_price,consumer_id:this.user.consumer_id,auction_name:this.auction.auction_name}),{}):alert("현재 경매가격보다 낮습니다!!")},connect(){const t="/socket";let e=new(Q())(t);this.stompClient=F().over(e),console.log(`소켓 연결을 시도합니다. 서버 주소: ${t}`),console.log(this.$store.state.config.headers);let s={TOKEN:this.$store.state.config.headers.TOKEN};console.log(s),this.stompClient.connect(s,(t=>{this.connected=!0,console.log("소켓 연결 성공",t),this.stompClient.subscribe("/send_bidding",(t=>{const e=JSON.parse(t.body);console.log(e),void 0!=e.auction_Id&&(this.$store.commit("UPDATE_BID_PRICE",e),this.auction.bid_price=e.bid_price)}))}),(t=>{console.log("소켓 연결 실패",t),this.connected=!1}))}}},et=s(89);const st=(0,et.Z)(tt,[["render",M],["__scopeId","data-v-803ef122"]]);var ot=st}}]);
//# sourceMappingURL=223.b3bd1384.js.map