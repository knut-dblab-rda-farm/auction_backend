"use strict";(self["webpackChunkrealvue"]=self["webpackChunkrealvue"]||[]).push([[816],{3658:function(e,t,s){s.r(t),s.d(t,{default:function(){return x}});var n=s(3396),o=s(9242),l=s(7139),i=s(6422),a=s(7853);const r=e=>((0,n.dD)("data-v-7992be7c"),e=e(),(0,n.Cn)(),e),c={class:"inner"},u=r((()=>(0,n._)("header",{class:"n-section-title first info_views-area"},[(0,n._)("h1",{class:"tit"},"회원정보")],-1))),m={class:"n-table table-row my-info-modify"},h=r((()=>(0,n._)("colgroup",null,[(0,n._)("col",{style:{width:"25%"}}),(0,n._)("col",{style:{width:"40%"}}),(0,n._)("col",{style:{width:"35%"}})],-1))),_=r((()=>(0,n._)("th",{scope:"row"},[(0,n._)("strong",null,"이메일")],-1))),d=r((()=>(0,n._)("th",{scope:"row"},[(0,n._)("strong",null,"비밀번호")],-1))),p=r((()=>(0,n._)("td",null," ******** ",-1))),g={key:0},f=r((()=>(0,n._)("td",null,null,-1))),w=r((()=>(0,n._)("th",{scope:"row"},[(0,n._)("strong",null,"휴대폰 번호")],-1))),b={key:1},S=r((()=>(0,n._)("td",null,null,-1))),C=r((()=>(0,n._)("th",{scope:"row"},[(0,n._)("strong",null,"회원명")],-1))),y=r((()=>(0,n._)("th",{scope:"row"},[(0,n._)("strong",null,"주민등록번호")],-1))),k={key:2},I=r((()=>(0,n._)("td",null,null,-1))),N={class:"my-info-img",id:"profile-image-area"},v=r((()=>(0,n._)("th",{scope:"row"},[(0,n._)("strong",null,"프로필 사진")],-1))),U=["src"],O={width:"65%"},P={key:3,class:"img-edit-contain"},z=r((()=>(0,n._)("br",null,null,-1))),W=r((()=>(0,n._)("label",{for:"product_img_file",class:"img-select-button"},"이미지 선택",-1))),V=r((()=>(0,n._)("div",{id:"image_container",class:"image_container"},[(0,n._)("p",{class:"change_img_title"},"바뀔 이미지")],-1))),A={class:"img-change-button"};function J(e,t,s,r,J,E){const D=(0,n.up)("Header"),R=(0,n.up)("SearchAddress"),q=(0,n.up)("UserSecession"),T=(0,n.up)("bottomNav");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n._)("div",null,[(0,n.Wm)(D,{headerProps:J.headerProps},null,8,["headerProps"]),(0,n._)("div",c,[u,(0,n.Wm)(i.O,{ref:"form",modelValue:e.profile,"onUpdate:modelValue":t[13]||(t[13]=t=>e.profile=t),"lazy-validation":"",onSubmit:t[14]||(t[14]=(0,o.iM)((()=>{}),["prevent"]))},{default:(0,n.w5)((()=>[(0,n._)("table",m,[h,(0,n._)("tbody",null,[(0,n._)("tr",null,[_,(0,n._)("td",null,(0,l.zw)(J.user.c_email),1)]),(0,n._)("tr",null,[d,p,(0,n._)("td",null,[(0,n._)("button",{type:"button",onClick:t[0]||(t[0]=(...e)=>E.c_passwd_show&&E.c_passwd_show(...e)),class:"n-btn w100 btn-sm btn-default",style:{float:"right"}},"비밀번호 수정")])]),J.isShow1?((0,n.wg)(),(0,n.iD)("tr",g,[f,(0,n.Wm)(a.h,{modelValue:J.c_passwd,"onUpdate:modelValue":t[1]||(t[1]=e=>J.c_passwd=e),type:"password",label:"",required:""},null,8,["modelValue"]),(0,n._)("td",null,[(0,n._)("button",{type:"button",onClick:t[2]||(t[2]=e=>E.update_consumer_member_c_passwd()),class:"n-btn w100 btn-sm btn-default",style:{float:"right"}},"수정하기")])])):(0,n.kq)("",!0),(0,n._)("tr",null,[w,(0,n._)("td",null,(0,l.zw)(J.user.c_phonenum),1),(0,n._)("td",null,[(0,n._)("button",{type:"button",onClick:t[3]||(t[3]=(...e)=>E.c_phonenum_show&&E.c_phonenum_show(...e)),class:"n-btn w100 btn-sm btn-default",style:{float:"right"}},"휴대폰 번호 수정")])]),J.isShow2?((0,n.wg)(),(0,n.iD)("tr",b,[S,(0,n.Wm)(a.h,{modelValue:J.c_phonenum,"onUpdate:modelValue":t[4]||(t[4]=e=>J.c_phonenum=e),label:"",required:""},null,8,["modelValue"]),(0,n._)("td",null,[(0,n._)("button",{type:"button",onClick:t[5]||(t[5]=e=>E.update_consumer_member_c_phonenum()),class:"n-btn w100 btn-sm btn-default",style:{float:"right"}},"수정하기")])])):(0,n.kq)("",!0),(0,n._)("tr",null,[C,(0,n._)("td",null,(0,l.zw)(J.user.c_name),1),(0,n._)("td",null,[(0,n._)("button",{type:"button",onClick:t[6]||(t[6]=(...e)=>E.c_name_show&&E.c_name_show(...e)),class:"n-btn w100 btn-sm btn-default",style:{float:"right"}},"회원명 수정")])]),(0,n._)("tr",null,[y,(0,n._)("td",null,(0,l.zw)(J.user.c_zipcode),1)]),J.isShow3?((0,n.wg)(),(0,n.iD)("tr",k,[I,(0,n.Wm)(a.h,{modelValue:J.c_name,"onUpdate:modelValue":t[7]||(t[7]=e=>J.c_name=e),label:"",required:""},null,8,["modelValue"]),(0,n._)("td",null,[(0,n._)("button",{type:"button",onClick:t[8]||(t[8]=e=>E.update_consumer_member_c_name()),class:"n-btn w100 btn-sm btn-default",style:{float:"right"}},"수정하기")])])):(0,n.kq)("",!0),(0,n._)("tr",N,[v,(0,n._)("td",null,[(0,n._)("div",null,[(0,n._)("img",{class:"img",src:null===this.user.c_profile_img?"/member_profile_images/base_image.png":`/member_profile_images/${this.user.c_profile_img}.png`,alt:"프로필 이미지"},null,8,U)])]),(0,n._)("td",O,[(0,n._)("button",{type:"button",onClick:t[9]||(t[9]=(...e)=>E.c_profile_img_show&&E.c_profile_img_show(...e)),class:"n-btn w100 btn-sm btn-default",style:{float:"right"}},"사진 수정")])]),J.isShow4?((0,n.wg)(),(0,n.iD)("tr",P,[(0,n._)("td",null,[(0,n._)("input",{multiple:"multiple",onChange:t[10]||(t[10]=e=>E.imgPreview(e)),style:{display:"none"},type:"file",id:"product_img_file",name:"product_img_file",accept:"image/*"},null,32),z,W,V]),(0,n._)("td",A,[(0,n._)("button",{type:"button",onClick:t[11]||(t[11]=e=>E.updateConsumerProfileImage()),class:"n-btn w100 btn-sm btn-default",style:{float:"right"}},"기본 이미지로 변경"),(0,n._)("button",{type:"button",onClick:t[12]||(t[12]=e=>E.updateConsumerProfileImage()),class:"n-btn w100 btn-sm btn-default",style:{float:"right"}},"수정 하기")])])):(0,n.kq)("",!0)])]),(0,n.Wm)(R,{addressInfo:J.addressInfo,onSearchAddressRes:E.searchAddressResult},null,8,["addressInfo","onSearchAddressRes"]),(0,n.Wm)(q)])),_:1},8,["modelValue"])])]),(0,n.Wm)(T)],64)}var E=s(5140),D=s(989),R=s(3454),q=s(6265),T=s.n(q),K=s(7170),Z={components:{Header:E.Z,bottomNav:R["default"],SearchAddress:K.Z,UserSecession:D.Z},data(){return{headerProps:"개인정보 수정",pro_test:JSON.parse(localStorage.getItem("pro_test"))||"",user:JSON.parse(localStorage.getItem("user"))||"",addressInfo:{zipcode:JSON.parse(localStorage.getItem("user")).c_zipcode,address:JSON.parse(localStorage.getItem("user")).c_location,c_detail_location:JSON.parse(localStorage.getItem("user")).c_detail_location,isConsumer:!0},isShow1:!1,isShow2:!1,isShow3:!1,isShow4:!1,isShow5:!1,isShow6:!1,c_passwd:null,c_phonenum:null,c_name:null,c_zipcode:null,c_location:null,checkUser:"consumer",c_profile_img:null,new_profile_img:JSON.parse(localStorage.getItem("user")).new_profile_img,passwordChangeConfirmation:"비밀번호를 변경하시겠습니까?",passwordChangeSuccess:"비밀번호가 변경되었습니다!",phonenumberRuleWarning:"휴대폰 번호는 11자리 숫자로 이루어져야 합니다!",samePhonenumberWarning:"변경할 휴대폰 번호는 이전 휴대폰 번호와 달라야 합니다!",phonenumberChangeConfirmation:"휴대폰 번호를 변경하시겠습니까?",phonenumberChangeSuccess:"휴대폰 번호가 변경되었습니다!",profileImageChangeConfirmation:"프로필 사진을 변경하시겠습니까?",profileImageChangeSuccess:"프로필 사진이 변경되었습니다!",nameChangeConfirmation:"회원명을 변경하시겠습니까?",sameNameWarning:"동일한 회원명입니다!",nameChangeSuccess:"회원명이 변경되었습니다!",addressChangeConfirmation:"주소를 변경하시겠습니까?",addressChangeSuccess:"주소가 변경되었습니다!"}},mounted(){console.log(this.user),this.user.consumer_id||(this.checkUser="farm")},methods:{c_passwd_show(){this.isShow1=!this.isShow1,console.log("passwd")},c_phonenum_show(){this.isShow2=!this.isShow2,console.log("num")},c_name_show(){this.isShow3=!this.isShow3,console.log("name")},c_profile_img_show(){this.isShow4=!this.isShow4,console.log("img")},update_consumer_member_c_passwd(){confirm(this.passwordChangeConfirmation)&&T().patch("api/memberPassword",{checkUser:this.checkUser,id:this.user.consumer_id,passwd:this.c_passwd},{headers:{TOKEN:this.user.token}}).then((e=>{console.log(e),alert(this.passwordChangeSuccess)})).catch((e=>{console.log(e)}))},isNotPhonenumber(){if(11!=this.c_phonenum.length)return!0;for(let e of this.c_phonenum)if(console.log(e),isNaN(e))return!0;return!1},update_consumer_member_c_phonenum(){return this.isNotPhonenumber()?alert(this.phonenumberRuleWarning):this.user.c_phonenum==this.c_phonenum?alert(this.samePhonenumberWarning):void(confirm(this.phonenumberChangeConfirmation)&&T().patch("api/memberPhoneNumber",{checkUser:this.checkUser,id:this.user.consumer_id,phonenum:this.c_phonenum},{headers:{TOKEN:this.user.token}}).then((e=>{console.log(e),this.user.c_phonenum=this.c_phonenum,localStorage.setItem("user",JSON.stringify(this.user)),alert(this.phonenumberChangeSuccess)})).catch((e=>{console.log(e)})))},update_consumer_member_c_name(){if(this.user.c_name==this.c_name)return alert(this.sameNameWarning);confirm(this.nameChangeConfirmation)&&T().patch("api/memberName",{checkUser:this.checkUser,id:this.user.consumer_id,name:this.c_name},{headers:{TOKEN:this.user.token}}).then((e=>{console.log(e),this.user.c_name=this.c_name,localStorage.setItem("user",JSON.stringify(this.user)),alert(this.nameChangeSuccess)})).catch((e=>{console.log(e)}))},updateConsumerProfileImage(){if(!confirm(this.profileImageChangeConfirmation))return;let e=new FormData;this.product_img_file=document.getElementById("product_img_file"),this.new_profile_img=document.getElementById("product_img_file").files[0],console.log(this.product_img_file.files[0]),console.log(this.new_profile_img),e.append("checkUser","consumer"),e.append("id",this.user.consumer_id),e.append("profile_img",this.user.c_profile_img),void 0!=this.new_profile_img&&e.append("new_profile_img",this.new_profile_img),T().patch("/api/memberProfileImage",e,{headers:{TOKEN:this.user.token,"Content-Type":"multipart/form-data"}}).then((e=>{console.log(e),console.log(e.data),this.user.c_profile_img=e.data,localStorage.setItem("user",JSON.stringify(this.user)),location.reload(),alert(this.profileImageChangeSuccess)})).catch((e=>{}))},imgPreview(e){let t=new FileReader;t.onload=function(e){let t=document.createElement("img");t.setAttribute("src",e.target.result),t.setAttribute("width","100px"),t.setAttribute("height","100px"),document.getElementById("image_container").appendChild(t)},t.readAsDataURL(e.target.files[0]),console.log(e.target.files[0])},searchAddressResult(e){console.log("event: ",e),confirm(this.addressChangeConfirmation)&&(this.addressInfo.zipcode=e.zipcode,this.addressInfo.location=e.address,this.addressInfo.c_detail_location=e.c_detail_location,T().patch("/api/memberAddress",{checkUser:"consumer",id:this.user.consumer_id,zipcode:e.zipcode,location:e.address,c_detail_location:e.c_detail_location},{headers:{TOKEN:this.user.token}}).then((t=>{console.log(t.data),this.user.c_zipcode=e.zipcode,this.user.c_location=e.address,this.user.c_detail_location=e.c_detail_location,localStorage.setItem("user",JSON.stringify(this.user)),alert(this.addressChangeSuccess),location.reload()})).catch((e=>{})))}}},B=s(89);const H=(0,B.Z)(Z,[["render",J],["__scopeId","data-v-7992be7c"]]);var x=H}}]);
//# sourceMappingURL=816.e1627079.js.map